<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeGuard - ××¢×¨×›×ª ×–×™×”×•×™ ××•×§×“× ×œ×‘×˜×™×—×•×ª ×ª×œ××™×“×™× - ××ª×§×“××ª</title>
    <style>
        /* === ×‘×¡×™×¡ === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #764ba2;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --info: #0ea5e9;
            --bg-light: #f7fafc;
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --radius-lg: 20px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* === ×¢×™×¦×•×‘×™× ×›×œ×œ×™×™× === */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary { background: var(--primary); color: var(--white); }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); }
        .btn-success { background: var(--success); color: var(--white); }
        .btn-warning { background: var(--warning); color: var(--white); }
        .btn-danger { background: var(--error); color: var(--white); }
        .btn-secondary { background: var(--gray-200); color: var(--gray-800); }

        .card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            margin-bottom: 1.5rem;
        }

        .card:hover { transform: translateY(-2px); }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-high { background: rgba(239, 68, 68, 0.1); color: var(--error); }
        .status-medium { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
        .status-low { background: rgba(16, 185, 129, 0.1); color: var(--success); }
        .status-new { background: rgba(14, 165, 233, 0.1); color: var(--info); }

        .hidden { display: none !important; }

        /* === ××¢×¨×›×•×ª ××‘×˜×—×” ×—×“×©×•×ª === */
        .security-indicator {
            position: fixed;
            top: 10px;
            left: 10px;
            background: var(--success);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 9999;
            animation: pulse 2s infinite;
        }

        .security-indicator.warning {
            background: var(--warning);
        }

        .security-indicator.danger {
            background: var(--error);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .biometric-scanner {
            width: 100px;
            height: 100px;
            border: 3px solid var(--primary);
            border-radius: 50%;
            margin: 1rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            animation: scan 2s infinite;
            cursor: pointer;
        }

        @keyframes scan {
            0%, 100% { border-color: var(--primary); }
            50% { border-color: var(--success); }
        }

        .two-factor-input {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .two-factor-input input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.5rem;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .two-factor-input input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .activity-log {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 1rem;
        }

        .log-entry {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            border-bottom: 1px solid var(--gray-100);
            font-size: 0.9rem;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-entry.success { color: var(--success); }
        .log-entry.warning { color: var(--warning); }
        .log-entry.error { color: var(--error); }

        .permission-matrix {
            display: grid;
            grid-template-columns: 200px repeat(4, 1fr);
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .permission-header {
            background: var(--primary);
            color: white;
            padding: 0.5rem;
            text-align: center;
            font-weight: bold;
        }

        .permission-cell {
            background: var(--gray-50);
            padding: 0.5rem;
            text-align: center;
            border: 1px solid var(--gray-200);
        }

        .permission-granted {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .permission-denied {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        /* === ×“×£ ×”×ª×—×‘×¨×•×ª === */
        .login-page {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
        }

        .login-container {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            width: 100%;
            max-width: 450px;
            animation: slideIn 0.8s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .login-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--white);
            padding: 2rem;
            text-align: center;
        }

        .login-header .logo { font-size: 3rem; margin-bottom: 1rem; }
        .login-header h1 { font-size: 2rem; margin-bottom: 0.5rem; }

        .login-form {
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: var(--gray-800);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--gray-50);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--white);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            border: none;
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .quick-login {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--gray-50);
            border-radius: var(--radius);
        }

        .quick-login h3 {
            margin-bottom: 1rem;
            color: var(--gray-800);
            text-align: center;
        }

        .quick-btn {
            display: block;
            width: 100%;
            padding: 0.8rem;
            margin-bottom: 0.8rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-btn:hover { background: var(--primary-dark); }

        .social-btn {
            flex: 1;
            padding: 0.6rem;
            border: 1px solid var(--gray-300);
            border-radius: 8px;
            background: var(--white);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .social-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .social-btn.facebook:hover { background: #1877f2; color: white; }
        .social-btn.google:hover { background: #4285f4; color: white; }
        .social-btn.twitter:hover { background: #1da1f2; color: white; }

        /* ×“×£ ×”×¨×©××” */
        .register-page {
            display: none;
        }

        .register-container {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            width: 100%;
            max-width: 500px;
            animation: slideIn 0.8s ease-out;
        }

        .register-header {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: var(--white);
            padding: 2rem;
            text-align: center;
        }

        .register-form {
            padding: 2rem;
        }

        /* === ×”××¤×œ×™×§×¦×™×” ×”×¨××©×™×ª === */
        .app-page {
            display: none;
            background-color: var(--bg-light);
            color: var(--gray-800);
            min-height: 100vh;
        }

        /* ×›×•×ª×¨×ª */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* × ×™×•×•×˜ */
        .navigation {
            background: var(--white);
            border-bottom: 1px solid var(--gray-200);
            padding: 0 2rem;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 2rem;
        }

        .nav-item {
            padding: 1rem 0;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-item:hover,
        .nav-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* ×ª×•×›×Ÿ ×¨××©×™ */
        .main-content {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .page-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--gray-800);
        }

        /* ×›×¨×˜×™×¡×™×•×ª ×“×©×‘×•×¨×“ */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .dashboard-card:hover { transform: translateY(-2px); }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .card-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .card-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .card-description {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* ×¡×•×’×™ ×›×¨×˜×™×¡×™×•×ª */
        .card-danger .card-icon { background: rgba(239, 68, 68, 0.1); color: var(--error); }
        .card-danger .card-value { color: var(--error); }
        .card-warning .card-icon { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
        .card-warning .card-value { color: var(--warning); }
        .card-success .card-icon { background: rgba(16, 185, 129, 0.1); color: var(--success); }
        .card-success .card-value { color: var(--success); }
        .card-info .card-icon { background: rgba(14, 165, 233, 0.1); color: var(--info); }
        .card-info .card-value { color: var(--info); }

        /* ×˜×‘×œ××•×ª */
        .table-container {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .table-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid var(--gray-200);
        }

        .table th {
            background: var(--gray-100);
            font-weight: 600;
            color: var(--gray-800);
        }

        .table tbody tr:hover {
            background: var(--gray-100);
        }

        .table .btn {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        /* ×”×•×“×¢×•×ª */
        .message {
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            font-weight: 500;
            animation: slideDown 0.3s ease;
        }

        .message.error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .message.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .message.info {
            background: rgba(14, 165, 233, 0.1);
            color: var(--info);
            border: 1px solid rgba(14, 165, 233, 0.2);
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ××œ×¨×˜×™× */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid;
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success);
            color: #065f46;
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--error);
            color: #991b1b;
        }

        .alert-info {
            background: rgba(14, 165, 233, 0.1);
            border-color: var(--info);
            color: #0c4a6e;
        }

        /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª */
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            .nav-content {
                overflow-x: auto;
                white-space: nowrap;
            }
            .main-content {
                padding: 0 1rem;
            }
            .table .btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.75rem;
            }
            .form-input, .form-input select {
                font-size: 16px; /* ××•× ×¢ ×–×•× ×‘××•×‘×™×™×œ */
            }
        }

        /* ×¡×’× ×•× ×•×ª ××™×•×—×“×™× */
        .demo-highlight {
            border-left: 5px solid var(--primary);
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
        }

        .feature-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .form-input, .form-input select, .form-input textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--gray-50);
            font-family: inherit;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--white);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .report-table-container {
            margin: 1rem 0;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .report-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .report-table th {
            background: var(--primary);
            color: var(--white);
            padding: 0.75rem;
            text-align: right;
            font-weight: 600;
        }

        .report-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--gray-200);
            text-align: right;
        }

        .report-table tbody tr:hover {
            background: var(--gray-50);
        }

        .report-table tbody tr:nth-child(even) {
            background: rgba(102, 126, 234, 0.02);
        }

        @media (max-width: 600px) {
            .feature-buttons {
                flex-direction: column;
            }
            .report-table {
                font-size: 0.8rem;
            }
            .report-table th,
            .report-table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- ××™× ×“×™×§×˜×•×¨ ××‘×˜×—×” -->
    <div id="securityIndicator" class="security-indicator">
        ğŸ”’ ××¢×¨×›×ª ×××•×‘×˜×—×ª
    </div>

    <!-- ×“×£ ×”×ª×—×‘×¨×•×ª -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">ğŸ›¡ï¸</div>
                <h1>SafeGuard Pro</h1>
                <p>××¢×¨×›×ª ×–×™×”×•×™ ××•×§×“× ××ª×§×“××ª ×œ×‘×˜×™×—×•×ª ×ª×œ××™×“×™×</p>
                <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.9;">
                    ğŸ” ××¢×¨×›×ª ××‘×˜×—×” ××ª×§×“××ª | ğŸ”‘ ××™××•×ª ×“×•-×©×œ×‘×™ | ğŸ“Š ×‘×™×§×•×¨×ª ××œ××”
                </div>
            </div>

            <div class="login-form">
                <div id="messageContainer"></div>

                <!-- ×©×œ×‘ 1: ×”×ª×—×‘×¨×•×ª ×¨×’×™×œ×” -->
                <form id="loginForm" onsubmit="handleLogin(event)" style="display: block;">
                    <div class="form-group">
                        <label class="form-label" for="username">×©× ××©×ª××©</label>
                        <input type="text" id="username" class="form-input" placeholder="×”×–×Ÿ ×©× ××©×ª××©" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="password">×¡×™×¡××”</label>
                        <input type="password" id="password" class="form-input" placeholder="×”×–×Ÿ ×¡×™×¡××”" required>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="rememberMe">
                            <span style="font-size: 0.9rem;">×–×›×•×¨ ××•×ª×™ (30 ×™×•×)</span>
                        </label>
                    </div>

                    <button type="submit" class="login-btn">×”×ª×—×‘×¨ ×œ××¢×¨×›×ª</button>
                    
                    <div style="text-align: center; margin-top: 1rem;">
                        <a href="#" onclick="showForgotPassword()" style="color: var(--primary); text-decoration: none; font-size: 0.9rem;">×©×›×—×ª ×¡×™×¡××”?</a>
                    </div>
                </form>

                <!-- ×©×œ×‘ 2: ××™××•×ª ×‘×™×•××˜×¨×™ -->
                <div id="biometricAuth" style="display: none; text-align: center;">
                    <h3>××™××•×ª ×‘×™×•××˜×¨×™</h3>
                    <p style="margin-bottom: 1rem; color: var(--gray-600);">×”×¦×¢ ××ª ×”××¦×‘×¢ ××• ×”×¡×ª×›×œ ×œ××¦×œ××”</p>
                    <div class="biometric-scanner" onclick="performBiometricAuth()">
                        ğŸ‘†
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="skipBiometric()">×“×œ×’ ×¢×œ ××™××•×ª ×‘×™×•××˜×¨×™</button>
                </div>

                <!-- ×©×œ×‘ 3: ××™××•×ª ×“×•-×©×œ×‘×™ -->
                <div id="twoFactorAuth" style="display: none; text-align: center;">
                    <h3>××™××•×ª ×“×•-×©×œ×‘×™</h3>
                    <p style="margin-bottom: 1rem; color: var(--gray-600);">×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ×˜×œ×¤×•×Ÿ ×©×œ×š</p>
                    <div class="two-factor-input">
                        <input type="text" maxlength="1" onkeyup="moveToNext(this, 0)">
                        <input type="text" maxlength="1" onkeyup="moveToNext(this, 1)">
                        <input type="text" maxlength="1" onkeyup="moveToNext(this, 2)">
                        <input type="text" maxlength="1" onkeyup="moveToNext(this, 3)">
                        <input type="text" maxlength="1" onkeyup="moveToNext(this, 4)">
                        <input type="text" maxlength="1" onkeyup="moveToNext(this, 5)">
                    </div>
                    <button type="button" class="btn btn-primary" onclick="verifyTwoFactor()">×××ª ×§×•×“</button>
                    <button type="button" class="btn btn-secondary" onclick="resendCode()">×©×œ×— ×§×•×“ ××—×“×©</button>
                </div>

                <!-- ×©×œ×‘ 4: ×©×—×–×•×¨ ×¡×™×¡××” -->
                <div id="forgotPasswordForm" style="display: none;">
                    <h3>×©×—×–×•×¨ ×¡×™×¡××”</h3>
                    <div class="form-group">
                        <label class="form-label" for="resetEmail">×›×ª×•×‘×ª ××™××™×™×œ</label>
                        <input type="email" id="resetEmail" class="form-input" placeholder="×”×–×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ" required>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="sendPasswordReset()">×©×œ×— ×§×™×©×•×¨ ××™×¤×•×¡</button>
                    <button type="button" class="btn btn-secondary" onclick="backToLogin()">×—×–×•×¨ ×œ×”×ª×—×‘×¨×•×ª</button>
                </div>

                <!-- ×œ×™× ×§ ×œ××©×ª××© ×—×“×© -->
                <div style="text-align: center; margin-top: 1rem;">
                    <p style="color: var(--gray-600);">××©×ª××© ×—×“×©? 
                        <a href="#" onclick="showRegisterPage()" style="color: var(--primary); text-decoration: none; font-weight: 600;">×”×™×¨×©× ×›××Ÿ</a>
                    </p>
                </div>

                <!-- ××• ×”×ª×—×‘×¨×•×ª ××¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª -->
                <div style="margin-top: 1.5rem; text-align: center;">
                    <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                        <div style="flex: 1; height: 1px; background: var(--gray-200);"></div>
                        <span style="padding: 0 1rem; color: var(--gray-500); font-size: 0.9rem;">××• ×”×ª×—×‘×¨ ×¢×</span>
                        <div style="flex: 1; height: 1px; background: var(--gray-200);"></div>
                    </div>
                    
                    <div style="display: flex; gap: 0.8rem; justify-content: center;">
                        <button type="button" class="social-btn facebook" onclick="loginWithFacebook()">
                            ğŸ“˜ Facebook
                        </button>
                        <button type="button" class="social-btn google" onclick="loginWithGoogle()">
                            ğŸ” Google
                        </button>
                        <button type="button" class="social-btn twitter" onclick="loginWithTwitter()">
                            ğŸ¦ Twitter
                        </button>
                    </div>
                </div>

                <div class="quick-login">
                    <h3>×›× ×™×¡×” ××”×™×¨×” ×œ××˜×¨×•×ª ×”×“×’××”:</h3>
                    <button class="quick-btn" onclick="quickLogin('××•×¨×” ×¨×—×œ ×›×”×Ÿ', 'teacher')">
                        ğŸ‘©â€ğŸ« ××•×¨×” ×¨×—×œ ×›×”×Ÿ
                    </button>
                    <button class="quick-btn" onclick="quickLogin('×™×•×¢×¥ ×“× ×™ ×œ×•×™', 'counselor')">
                        ğŸ‘¨â€ğŸ’¼ ×™×•×¢×¥ ×“× ×™ ×œ×•×™
                    </button>
                    <button class="quick-btn" onclick="quickLogin('×× ×”×œ×ª ×©×¨×” ××‘×¨×”×', 'principal')">
                        ğŸ‘©â€ğŸ’¼ ×× ×”×œ×ª ×©×¨×” ××‘×¨×”×
                    </button>
                    <button class="quick-btn" onclick="quickLogin('×× ×”×œ ××¢×¨×›×ª', 'admin')">
                        ğŸ”§ ×× ×”×œ ××¢×¨×›×ª
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ×“×£ ×”×¨×©××” -->
    <div id="registerPage" class="login-page register-page">
        <div class="register-container">
            <div class="register-header">
                <div class="logo">ğŸ†•</div>
                <h1>×”×¨×©××” ×œ××¢×¨×›×ª</h1>
                <p>×¦×•×¨ ×—×©×‘×•×Ÿ ×—×“×© ×‘××¢×¨×›×ª SafeGuard Pro</p>
            </div>

            <div class="register-form">
                <div id="registerMessageContainer"></div>

                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label class="form-label" for="regFirstName">×©× ×¤×¨×˜×™</label>
                        <input type="text" id="regFirstName" class="form-input" placeholder="×”×–×Ÿ ×©× ×¤×¨×˜×™" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regLastName">×©× ××©×¤×—×”</label>
                        <input type="text" id="regLastName" class="form-input" placeholder="×”×–×Ÿ ×©× ××©×¤×—×”" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regEmail">×›×ª×•×‘×ª ××™××™×™×œ</label>
                        <input type="email" id="regEmail" class="form-input" placeholder="×”×–×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regPhone">××¡×¤×¨ ×˜×œ×¤×•×Ÿ</label>
                        <input type="tel" id="regPhone" class="form-input" placeholder="×”×–×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ××™××•×ª" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regPassword">×¡×™×¡××”</label>
                        <input type="password" id="regPassword" class="form-input" placeholder="×‘×—×¨ ×¡×™×¡××” ×—×–×§×” (8+ ×ª×•×•×™×)" required minlength="8">
                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-top: 0.5rem;">
                            ×”×¡×™×¡××” ×—×™×™×‘×ª ×œ×”×›×™×œ: ××•×ª×™×•×ª ×’×“×•×œ×•×ª, ×§×˜× ×•×ª, ××¡×¤×¨×™× ×•×ª×• ××™×•×—×“
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regConfirmPassword">××™×©×•×¨ ×¡×™×¡××”</label>
                        <input type="password" id="regConfirmPassword" class="form-input" placeholder="×”×–×Ÿ ××ª ×”×¡×™×¡××” ×©×•×‘" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regRole">×ª×¤×§×™×“ ×‘××¢×¨×›×ª</label>
                        <select id="regRole" class="form-input" required>
                            <option value="">×‘×—×¨ ×ª×¤×§×™×“</option>
                            <option value="teacher">××•×¨×”</option>
                            <option value="counselor">×™×•×¢×¥ ×—×™× ×•×›×™</option>
                            <option value="principal">×× ×”×œ/×ª ×‘×™×ª ×¡×¤×¨</option>
                            <option value="admin">×× ×”×œ ××¢×¨×›×ª</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="regInstitution">××•×¡×“ ×—×™× ×•×›×™</label>
                        <input type="text" id="regInstitution" class="form-input" placeholder="×©× ×‘×™×ª ×”×¡×¤×¨ ××• ×”××•×¡×“" required>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="regTerms" required>
                            <span style="font-size: 0.9rem; color: var(--gray-600);">
                                ×× ×™ ××¡×›×™×/×” ×œ×ª× ××™ ×”×©×™××•×© ×•×œ××“×™× ×™×•×ª ×”×¤×¨×˜×™×•×ª
                            </span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="regNewsletters">
                            <span style="font-size: 0.9rem; color: var(--gray-600);">
                                ×× ×™ ××¢×•× ×™×™×Ÿ/×ª ×œ×§×‘×œ ×¢×“×›×•× ×™× ×•×‘×˜×œ×˜×Ÿ ××‘×˜×—×”
                            </span>
                        </label>
                    </div>

                    <button type="submit" class="login-btn">×”×™×¨×©× ×œ××¢×¨×›×ª</button>
                </form>

                <!-- ×œ×™× ×§ ×—×–×¨×” ×œ×”×ª×—×‘×¨×•×ª -->
                <div style="text-align: center; margin-top: 1rem;">
                    <p style="color: var(--gray-600);">×›×‘×¨ ×™×© ×œ×š ×—×©×‘×•×Ÿ? 
                        <a href="#" onclick="showLoginPage()" style="color: var(--primary); text-decoration: none; font-weight: 600;">×”×ª×—×‘×¨ ×›××Ÿ</a>
                    </p>
                </div>

                <!-- ××• ×”×¨×©××” ××¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª -->
                <div style="margin-top: 1.5rem; text-align: center;">
                    <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                        <div style="flex: 1; height: 1px; background: var(--gray-200);"></div>
                        <span style="padding: 0 1rem; color: var(--gray-500); font-size: 0.9rem;">××• ×”×™×¨×©× ×¢×</span>
                        <div style="flex: 1; height: 1px; background: var(--gray-200);"></div>
                    </div>
                    
                    <div style="display: flex; gap: 0.8rem; justify-content: center;">
                        <button type="button" class="social-btn facebook" onclick="registerWithFacebook()">
                            ğŸ“˜ Facebook
                        </button>
                        <button type="button" class="social-btn google" onclick="registerWithGoogle()">
                            ğŸ” Google
                        </button>
                        <button type="button" class="social-btn twitter" onclick="registerWithTwitter()">
                            ğŸ¦ Twitter
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ×”××¤×œ×™×§×¦×™×” ×”×¨××©×™×ª -->
    <div id="appPage" class="app-page">
        <!-- ×›×•×ª×¨×ª -->
        <header class="header">
            <div class="header-content">
                <div class="logo">ğŸ›¡ï¸ SafeGuard Pro</div>
                <div class="user-menu">
                    <span id="userRole" style="font-size: 0.8rem; opacity: 0.8;"></span>
                    <span id="currentUser">××©×ª××©</span>
                    <span id="sessionTimer" style="font-size: 0.8rem; opacity: 0.8;"></span>
                    <button class="btn btn-secondary" onclick="showSecurityPanel()">ğŸ”’ ××‘×˜×—×”</button>
                    <button class="btn btn-secondary" onclick="handleLogout()">×™×¦×™××”</button>
                </div>
            </div>
        </header>

        <!-- × ×™×•×•×˜ -->
        <nav class="navigation">
            <div class="nav-content">
                <div class="nav-item active" onclick="showSection('dashboard')">×œ×•×— ×‘×§×¨×”</div>
                <div class="nav-item" onclick="showSection('students')">×ª×œ××™×“×™×</div>
                <div class="nav-item" onclick="showSection('alerts')">×”×ª×¨××•×ª</div>
                <div class="nav-item" onclick="showSection('reports')">×“×•×—×•×ª</div>
                <div class="nav-item" onclick="showSection('security')">ğŸ”’ ××‘×˜×—×”</div>
                <div class="nav-item" onclick="showSection('settings')">×”×’×“×¨×•×ª</div>
            </div>
        </nav>

        <!-- ×ª×•×›×Ÿ ×¨××©×™ -->
        <main class="main-content">
            <!-- ×œ×•×— ×‘×§×¨×” -->
            <section id="dashboard-section">
                <h1 class="page-title">×œ×•×— ×‘×§×¨×” ××ª×§×“×</h1>
                
                <!-- ×›×¨×˜×™×¡×™×•×ª ×¡×˜×˜×™×¡×˜×™×§×•×ª -->
                <div class="dashboard-cards">
                    <div class="dashboard-card card-danger">
                        <div class="card-header">
                            <div class="card-title">×”×ª×¨××•×ª ×“×—×•×¤×•×ª</div>
                            <div class="card-icon">ğŸš¨</div>
                        </div>
                        <div class="card-value">3</div>
                        <div class="card-description">×“×•×¨×©×•×ª ×˜×™×¤×•×œ ××™×™×“×™</div>
                    </div>

                    <div class="dashboard-card card-warning">
                        <div class="card-header">
                            <div class="card-title">×ª×œ××™×“×™× ×‘×¡×™×›×•×Ÿ</div>
                            <div class="card-icon">âš ï¸</div>
                        </div>
                        <div class="card-value">12</div>
                        <div class="card-description">×“×•×¨×©×™× ××¢×§×‘ ×¦××•×“</div>
                    </div>

                    <div class="dashboard-card card-success">
                        <div class="card-header">
                            <div class="card-title">×ª×œ××™×“×™× ×‘××¢×§×‘</div>
                            <div class="card-icon">ğŸ‘¥</div>
                        </div>
                        <div class="card-value">87</div>
                        <div class="card-description">×¡×”"×› ×ª×œ××™×“×™× ×¤×¢×™×œ×™×</div>
                    </div>

                    <div class="dashboard-card card-info">
                        <div class="card-header">
                            <div class="card-title">×“×•×—×•×ª ×”×©×‘×•×¢</div>
                            <div class="card-icon">ğŸ“Š</div>
                        </div>
                        <div class="card-value">5</div>
                        <div class="card-description">×“×•×—×•×ª ×©× ×•×¦×¨×• ×”×©×‘×•×¢</div>
                    </div>

                    <!-- ×›×¨×˜×™×¡×™×™×ª ××‘×˜×—×” ×—×“×©×” -->
                    <div class="dashboard-card card-info">
                        <div class="card-header">
                            <div class="card-title">×¡×˜×˜×•×¡ ××‘×˜×—×”</div>
                            <div class="card-icon">ğŸ”’</div>
                        </div>
                        <div class="card-value">98%</div>
                        <div class="card-description">×¨××ª ××‘×˜×—×” ××¦×•×™× ×ª</div>
                    </div>

                    <div class="dashboard-card card-success">
                        <div class="card-header">
                            <div class="card-title">××©×ª××©×™× ××—×•×‘×¨×™×</div>
                            <div class="card-icon">ğŸ‘¤</div>
                        </div>
                        <div class="card-value">24</div>
                        <div class="card-description">×¤×¢×™×œ×™× ×›×¢×ª ×‘××¢×¨×›×ª</div>
                    </div>
                </div>

                <!-- ×˜×‘×œ×ª ×”×ª×¨××•×ª ××—×¨×•× ×•×ª -->
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">×”×ª×¨××•×ª ××—×¨×•× ×•×ª</div>
                        <button class="btn btn-primary" onclick="showSection('alerts')">×¦×¤×” ×‘×›×œ ×”×”×ª×¨××•×ª</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>×ª×œ××™×“</th>
                                <th>×¡×•×’ ×”×ª×¨××”</th>
                                <th>×¨××ª ×—×•××¨×”</th>
                                <th>×–××Ÿ</th>
                                <th>×¤×¢×•×œ×•×ª</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>×©×¨×” ××¨×˜×™× ×¡</td>
                                <td>×‘×¢×™×” ×—×‘×¨×ª×™×ª</td>
                                <td><span class="status-badge status-high">×’×‘×•×”</span></td>
                                <td>21/01/2024 08:30</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('sarah_martins')">×¦×¤×”</button>
                                    <button class="btn btn-success">×¤×ª×•×¨</button>
                                </td>
                            </tr>
                            <tr>
                                <td>×“×•×“ ×œ×•×™</td>
                                <td>×‘×¢×™×” ×”×ª× ×”×’×•×ª×™×ª</td>
                                <td><span class="status-badge status-medium">×‘×™× ×•× ×™</span></td>
                                <td>20/01/2024 11:45</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('david_levi')">×¦×¤×”</button>
                                    <button class="btn btn-success">×¤×ª×•×¨</button>
                                </td>
                            </tr>
                            <tr>
                                <td>××™×›×œ ×›×”×Ÿ</td>
                                <td>×‘×¢×™×” ××§×“××™×ª</td>
                                <td><span class="status-badge status-low">× ××•×š</span></td>
                                <td>19/01/2024 14:20</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('michal_cohen')">×¦×¤×”</button>
                                    <button class="btn btn-success">×¤×ª×•×¨</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ×”×“×’××ª ×ª×›×•× ×•×ª ××ª×§×“××•×ª -->
                <div class="card demo-highlight">
                    <div class="card-header">
                        <div class="card-title">ğŸš€ ×”×“×’××ª ×™×›×•×œ×•×ª ××ª×§×“××•×ª</div>
                    </div>
                    <p>×”×“×’××ª ×”×™×›×•×œ×•×ª ×”×˜×›× ×™×•×ª ×”××ª×§×“××•×ª ×©×œ ××¢×¨×›×ª SafeGuard Pro:</p>
                    <div class="feature-buttons">
                        <button class="btn btn-primary" onclick="demonstrateAI()">
                            ğŸ¤– ×”×“×’××ª ×™×›×•×œ×•×ª AI
                        </button>
                        <button class="btn btn-warning" onclick="demonstrateProblemSolving()">
                            ğŸ”§ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª ××•×˜×•××˜×™
                        </button>
                        <button class="btn btn-success" onclick="demonstratePerformance()">
                            âš¡ ××•×¤×˜×™××™×–×¦×™×™×ª ×‘×™×¦×•×¢×™×
                        </button>
                        <button class="btn btn-info" onclick="generateReport()">
                            ğŸ“Š ×“×•×— ××ª×§×“×
                        </button>
                        <button class="btn btn-danger" onclick="demonstrateSecurityScan()">
                            ğŸ” ×¡×¨×™×§×ª ××‘×˜×—×”
                        </button>
                    </div>
                </div>
            </section>

            <!-- ××¢×§×‘ ×ª×œ××™×“×™× -->
            <section id="students-section" class="hidden">
                <h1 class="page-title">××¢×§×‘ ×ª×œ××™×“×™×</h1>
                
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">×¨×©×™××ª ×ª×œ××™×“×™×</div>
                        <button class="btn btn-primary" onclick="showAddStudentModal()">â• ×”×•×¡×£ ×ª×œ××™×“</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>×©× ×”×ª×œ××™×“</th>
                                <th>×›×™×ª×”</th>
                                <th>×¨××ª ×¡×™×›×•×Ÿ</th>
                                <th>×¢×“×›×•×Ÿ ××—×¨×•×Ÿ</th>
                                <th>×¤×¢×•×œ×•×ª</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>×©×¨×” ××¨×˜×™× ×¡</td>
                                <td>×›×™×ª×” ×–</td>
                                <td><span class="status-badge status-high">×’×‘×•×”</span></td>
                                <td>21/01/2024 10:30</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('sarah_martins')">×¦×¤×”</button>
                                    <button class="btn btn-warning">×¢×¨×•×š</button>
                                </td>
                            </tr>
                            <tr>
                                <td>×“×•×“ ×œ×•×™</td>
                                <td>×›×™×ª×” ×—</td>
                                <td><span class="status-badge status-medium">×‘×™× ×•× ×™</span></td>
                                <td>20/01/2024 14:20</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('david_levi')">×¦×¤×”</button>
                                    <button class="btn btn-warning">×¢×¨×•×š</button>
                                </td>
                            </tr>
                            <tr>
                                <td>××™×›×œ ×›×”×Ÿ</td>
                                <td>×›×™×ª×” ×•</td>
                                <td><span class="status-badge status-low">× ××•×š</span></td>
                                <td>19/01/2024 09:15</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('michal_cohen')">×¦×¤×”</button>
                                    <button class="btn btn-warning">×¢×¨×•×š</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- × ×™×”×•×œ ×”×ª×¨××•×ª -->
            <section id="alerts-section" class="hidden">
                <h1 class="page-title">× ×™×”×•×œ ×”×ª×¨××•×ª</h1>
                
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">×›×œ ×”×”×ª×¨××•×ª</div>
                        <button class="btn btn-primary" onclick="showCreateAlertModal()">ğŸš¨ ×¦×•×¨ ×”×ª×¨××” ×—×“×©×”</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>×ª×œ××™×“</th>
                                <th>×¡×•×’ ×”×ª×¨××”</th>
                                <th>×—×•××¨×”</th>
                                <th>×¡×˜×˜×•×¡</th>
                                <th>× ×•×¦×¨</th>
                                <th>×¤×¢×•×œ×•×ª</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>×©×¨×” ××¨×˜×™× ×¡</td>
                                <td>×‘×¢×™×” ×—×‘×¨×ª×™×ª</td>
                                <td><span class="status-badge status-high">×’×‘×•×”</span></td>
                                <td><span class="status-badge status-new">×—×“×©</span></td>
                                <td>21/01/2024 08:30</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('sarah_martins')">×¦×¤×”</button>
                                    <button class="btn btn-success">×¤×ª×•×¨</button>
                                </td>
                            </tr>
                            <tr>
                                <td>×“×•×“ ×œ×•×™</td>
                                <td>×‘×¢×™×” ×”×ª× ×”×’×•×ª×™×ª</td>
                                <td><span class="status-badge status-medium">×‘×™× ×•× ×™</span></td>
                                <td><span class="status-badge status-medium">×‘×˜×™×¤×•×œ</span></td>
                                <td>20/01/2024 11:45</td>
                                <td>
                                    <button class="btn btn-primary" onclick="viewStudentProfile('david_levi')">×¦×¤×”</button>
                                    <button class="btn btn-success">×¤×ª×•×¨</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ×“×•×—×•×ª -->
            <section id="reports-section" class="hidden">
                <h1 class="page-title">×“×•×—×•×ª ×•×× ×œ×™×˜×™×§×”</h1>
                
                <div class="dashboard-cards">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">×“×•×— ×©×‘×•×¢×™</div>
                            <div class="card-icon">ğŸ“ˆ</div>
                        </div>
                        <p>×“×•×— ××¤×•×¨×˜ ×¢×œ ×¤×¢×™×œ×•×ª ×”×©×‘×•×¢ ×”× ×•×›×—×™</p>
                        <br>
                        <button class="btn btn-primary" onclick="generateWeeklyReport()">×¦×•×¨ ×“×•×—</button>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">×“×•×— ×—×•×“×©×™</div>
                            <div class="card-icon">ğŸ“Š</div>
                        </div>
                        <p>×¡×™×›×•× ×—×•×“×©×™ ×©×œ ×›×œ ×”×¤×¢×™×œ×•×™×•×ª</p>
                        <br>
                        <button class="btn btn-primary" onclick="generateMonthlyReport()">×¦×•×¨ ×“×•×—</button>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">×“×•×— ××‘×˜×—×”</div>
                            <div class="card-icon">ğŸ”’</div>
                        </div>
                        <p>×“×•×— ××¤×•×¨×˜ ×¢×œ ×¤×¢×™×œ×•×ª ××‘×˜×—×” ×•×”×¨×©××•×ª</p>
                        <br>
                        <button class="btn btn-primary" onclick="generateSecurityReport()">×¦×•×¨ ×“×•×—</button>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">×“×•×— ××•×ª×× ××™×©×™×ª</div>
                            <div class="card-icon">âš™ï¸</div>
                        </div>
                        <p>×¦×•×¨ ×“×•×— ×œ×¤×™ ×”×§×¨×™×˜×¨×™×•× ×™× ×©×œ×š</p>
                        <br>
                        <button class="btn btn-primary" onclick="showCustomReport()">×”×ª×—×œ</button>
                    </div>
                </div>
            </section>

            <!-- ××¨×›×– ××‘×˜×—×” ×—×“×© -->
            <section id="security-section" class="hidden">
                <h1 class="page-title">ğŸ”’ ××¨×›×– ××‘×˜×—×” ×•××¢×¨×›×•×ª ×”×’× ×”</h1>
                
                <!-- ×¡×˜×˜×•×¡ ××‘×˜×—×” -->
                <div class="dashboard-cards">
                    <div class="dashboard-card card-success">
                        <div class="card-header">
                            <div class="card-title">×¡×˜×˜×•×¡ ××¢×¨×›×ª</div>
                            <div class="card-icon">âœ…</div>
                        </div>
                        <div class="card-value">×××•×‘×˜×—</div>
                        <div class="card-description">×›×œ ×”××¢×¨×›×•×ª ×¤×•×¢×œ×•×ª ×›×¨×’×™×œ</div>
                    </div>

                    <div class="dashboard-card card-info">
                        <div class="card-header">
                            <div class="card-title">××©×ª××©×™× ××—×•×‘×¨×™×</div>
                            <div class="card-icon">ğŸ‘¥</div>
                        </div>
                        <div class="card-value">24</div>
                        <div class="card-description">×¤×¢×™×œ×™× ×‘×¨×’×¢ ×–×”</div>
                    </div>

                    <div class="dashboard-card card-warning">
                        <div class="card-header">
                            <div class="card-title">× ×™×¡×™×•× ×•×ª ×—×©×•×“×™×</div>
                            <div class="card-icon">âš ï¸</div>
                        </div>
                        <div class="card-value">3</div>
                        <div class="card-description">×”×©×¢×” ×”××—×¨×•× ×”</div>
                    </div>

                    <div class="dashboard-card card-success">
                        <div class="card-header">
                            <div class="card-title">×’×™×‘×•×™×™×</div>
                            <div class="card-icon">ğŸ’¾</div>
                        </div>
                        <div class="card-value">100%</div>
                        <div class="card-description">×’×™×‘×•×™ ××•×˜×•××˜×™ ×¤×¢×™×œ</div>
                    </div>
                </div>

                <!-- ××˜×¨×™×¦×ª ×”×¨×©××•×ª -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ”‘ ××˜×¨×™×¦×ª ×”×¨×©××•×ª</div>
                    </div>
                    <div class="permission-matrix">
                        <div class="permission-header">×ª×¤×§×™×“</div>
                        <div class="permission-header">×¦×¤×™×™×” ×‘×ª×œ××™×“×™×</div>
                        <div class="permission-header">×¢×¨×™×›×ª × ×ª×•× ×™×</div>
                        <div class="permission-header">×™×¦×™×¨×ª ×“×•×—×•×ª</div>
                        <div class="permission-header">× ×™×”×•×œ ××©×ª××©×™×</div>
                        
                        <div class="permission-cell">××•×¨×”</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-denied">âœ—</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-denied">âœ—</div>
                        
                        <div class="permission-cell">×™×•×¢×¥</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-denied">âœ—</div>
                        
                        <div class="permission-cell">×× ×”×œ</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        
                        <div class="permission-cell">×× ×”×œ ××¢×¨×›×ª</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                        <div class="permission-cell permission-granted">âœ“</div>
                    </div>
                </div>

                <!-- ×œ×•×’ ×¤×¢×™×œ×•×ª -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ“‹ ×œ×•×’ ×¤×¢×™×œ×•×ª ××—×¨×•×Ÿ</div>
                        <button class="btn btn-primary" onclick="refreshActivityLog()">×¨×¢× ×Ÿ</button>
                    </div>
                    <div class="activity-log" id="activityLog">
                        <div class="log-entry success">
                            <span>×”×ª×—×‘×¨×•×ª ××•×¦×œ×—×ª - ××•×¨×” ×¨×—×œ ×›×”×Ÿ</span>
                            <span>15:30:45</span>
                        </div>
                        <div class="log-entry">
                            <span>×¦×¤×™×™×” ×‘×¤×¨×•×¤×™×œ ×ª×œ××™×“ - ×©×¨×” ××¨×˜×™× ×¡</span>
                            <span>15:28:12</span>
                        </div>
                        <div class="log-entry warning">
                            <span>× ×™×¡×™×•×Ÿ ×”×ª×—×‘×¨×•×ª ×›×•×©×œ - IP: 192.168.1.100</span>
                            <span>15:25:33</span>
                        </div>
                        <div class="log-entry success">
                            <span>×™×¦×™×¨×ª ×“×•×— ×©×‘×•×¢×™ - ×™×•×¢×¥ ×“× ×™ ×œ×•×™</span>
                            <span>15:20:01</span>
                        </div>
                        <div class="log-entry error">
                            <span>×–×•×”×” × ×™×¡×™×•×Ÿ ×’×™×©×” ×œ× ××•×¨×©×”</span>
                            <span>15:15:22</span>
                        </div>
                    </div>
                </div>

                <!-- ×›×œ×™ ××‘×˜×—×” -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ› ï¸ ×›×œ×™ ××‘×˜×—×” ×•×‘×§×¨×”</div>
                    </div>
                    <div class="feature-buttons">
                        <button class="btn btn-primary" onclick="runSecurityScan()">
                            ğŸ” ×”×¨×¥ ×¡×¨×™×§×ª ××‘×˜×—×”
                        </button>
                        <button class="btn btn-warning" onclick="lockSuspiciousAccounts()">
                            ğŸ”’ × ×¢×œ ×—×©×‘×•× ×•×ª ×—×©×•×“×™×
                        </button>
                        <button class="btn btn-success" onclick="runBackup()">
                            ğŸ’¾ ×”×¨×¥ ×’×™×‘×•×™ ××™×™×“×™
                        </button>
                        <button class="btn btn-info" onclick="exportSecurityLog()">
                            ğŸ“¤ ×™×™×¦× ×œ×•×’ ××‘×˜×—×”
                        </button>
                        <button class="btn btn-danger" onclick="emergencyLockdown()">
                            ğŸš¨ × ×¢×™×œ×ª ×—×™×¨×•×
                        </button>
                    </div>
                </div>
            </section>

            <!-- ×”×’×“×¨×•×ª -->
            <section id="settings-section" class="hidden">
                <h1 class="page-title">×”×’×“×¨×•×ª ××¢×¨×›×ª</h1>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">×”×’×“×¨×•×ª ×”×ª×¨××•×ª</div>
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" checked> 
                                ×§×‘×œ×ª ×”×ª×¨××•×ª ×‘××™×™×œ
                            </label>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox"> 
                                ×§×‘×œ×ª ×”×ª×¨××•×ª ×‘-SMS
                            </label>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">×¨××ª ×”×ª×¨××•×ª ××™× ×™××œ×™×ª</label>
                            <select style="padding: 0.5rem; border: 1px solid var(--gray-200); border-radius: 6px; width: 200px;">
                                <option value="low">× ××•×š</option>
                                <option value="medium" selected>×‘×™× ×•× ×™</option>
                                <option value="high">×’×‘×•×”</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-success" onclick="saveSettings()">×©××•×¨ ×”×’×“×¨×•×ª</button>
                    </div>
                </div>

                <!-- ×”×’×“×¨×•×ª ××‘×˜×—×” ×—×“×©×•×ª -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ”’ ×”×’×“×¨×•×ª ××‘×˜×—×” ××ª×§×“××•×ª</div>
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" checked> 
                                ××™××•×ª ×“×•-×©×œ×‘×™ (2FA)
                            </label>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" checked> 
                                ××™××•×ª ×‘×™×•××˜×¨×™
                            </label>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox"> 
                                × ×¢×™×œ×” ××•×˜×•××˜×™×ª ×œ××—×¨ ×—×•×¡×¨ ×¤×¢×™×œ×•×ª
                            </label>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" checked> 
                                ×¨×™×©×•× ×›×œ ×”×¤×¢×•×œ×•×ª (Audit Trail)
                            </label>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">×–××Ÿ ×ª×¤×•×’×ª ×¡×©×Ÿ (×“×§×•×ª)</label>
                            <select style="padding: 0.5rem; border: 1px solid var(--gray-200); border-radius: 6px; width: 200px;">
                                <option value="15">15 ×“×§×•×ª</option>
                                <option value="30" selected>30 ×“×§×•×ª</option>
                                <option value="60">60 ×“×§×•×ª</option>
                                <option value="120">120 ×“×§×•×ª</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">××¡×¤×¨ × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª ××§×¡×™××œ×™</label>
                            <select style="padding: 0.5rem; border: 1px solid var(--gray-200); border-radius: 6px; width: 200px;">
                                <option value="3" selected>3 × ×™×¡×™×•× ×•×ª</option>
                                <option value="5">5 × ×™×¡×™×•× ×•×ª</option>
                                <option value="10">10 × ×™×¡×™×•× ×•×ª</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-success" onclick="saveSecuritySettings()">×©××•×¨ ×”×’×“×¨×•×ª ××‘×˜×—×”</button>
                    </div>
                </div>

                <!-- ×”×¡×‘×¨ ×¢×œ ×”×¨×©××•×ª -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ğŸ‘¥ ××™×“×¢ ×¢×œ ×”×¨×©××•×ª ×”××¢×¨×›×ª</div>
                    </div>
                    
                    <div style="margin-top: 1rem;">
                        <h4 style="margin-bottom: 1rem; color: var(--primary);">×”×¨×©××•×ª ×œ×¤×™ ×ª×¤×§×™×“×™×:</h4>
                        
                        <div style="margin-bottom: 1rem; padding: 1rem; background: var(--gray-50); border-radius: 8px;">
                            <strong style="color: var(--success);">ğŸ‘©â€ğŸ« ××•×¨×”:</strong><br>
                            â€¢ ×¦×¤×™×™×” ×‘×ª×œ××™×“×™× ×•×‘×¤×¨×˜×™×”×<br>
                            â€¢ ×™×¦×™×¨×ª ×•×”×ª×¨××•×ª<br>
                            â€¢ ×’×™×©×” ×œ×œ×•×— ×”×‘×§×¨×” ×•×”×”×’×“×¨×•×ª<br>
                            â€¢ âŒ ××™×Ÿ ×’×™×©×” ×œ×“×•×—×•×ª ×•××¨×›×– ××‘×˜×—×”
                        </div>
                        
                        <div style="margin-bottom: 1rem; padding: 1rem; background: var(--gray-50); border-radius: 8px;">
                            <strong style="color: var(--warning);">ğŸ‘¨â€ğŸ’¼ ×™×•×¢×¥ ×—×™× ×•×›×™:</strong><br>
                            â€¢ ×›×œ ×”×¨×©××•×ª ×”××•×¨×”<br>
                            â€¢ âœ… ×™×¦×™×¨×ª ×“×•×—×•×ª ××ª×§×“××™×<br>
                            â€¢ ×¢×¨×™×›×ª × ×ª×•× ×™ ×ª×œ××™×“×™×<br>
                            â€¢ âŒ ××™×Ÿ ×’×™×©×” ×œ××¨×›×– ××‘×˜×—×”
                        </div>
                        
                        <div style="margin-bottom: 1rem; padding: 1rem; background: var(--gray-50); border-radius: 8px;">
                            <strong style="color: var(--info);">ğŸ‘©â€ğŸ’¼ ×× ×”×œ/×ª ×‘×™×ª ×¡×¤×¨:</strong><br>
                            â€¢ ×›×œ ×”×¨×©××•×ª ×”×™×•×¢×¥<br>
                            â€¢ âœ… × ×™×”×•×œ ×›×œ ×”×ª×œ××™×“×™× ×•×”××©×ª××©×™×<br>
                            â€¢ ×’×™×©×” ××œ××” ×œ×›×œ ×”×“×•×—×•×ª<br>
                            â€¢ âŒ ××™×Ÿ ×’×™×©×” ×œ××¨×›×– ××‘×˜×—×”
                        </div>
                        
                        <div style="margin-bottom: 1rem; padding: 1rem; background: var(--gray-50); border-radius: 8px;">
                            <strong style="color: var(--error);">ğŸ”§ ×× ×”×œ ××¢×¨×›×ª:</strong><br>
                            â€¢ âœ… ×”×¨×©××•×ª ××œ××•×ª ×œ×›×œ ×—×œ×§×™ ×”××¢×¨×›×ª<br>
                            â€¢ âœ… ×’×™×©×” ×œ××¨×›×– ×”××‘×˜×—×”<br>
                            â€¢ × ×™×”×•×œ ×”×¨×©××•×ª ××©×ª××©×™×<br>
                            â€¢ ×‘×§×¨×ª ××‘×˜×—×” ×•×œ×•×’×™×
                        </div>
                        
                        <div style="background: rgba(14, 165, 233, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--info);">
                            <strong>ğŸ’¡ ×”×¢×¨×”:</strong> ×× × ×›× ×¡×ª ×“×¨×š ×¤×™×™×¡×‘×•×§/×’×•×’×œ/×˜×•×•×™×˜×¨, ××ª×” ××§×‘×œ ××•×˜×•××˜×™×ª ×”×¨×©××•×ª ××•×¨×”. 
                            ×œ××¢×‘×¨ ×œ×ª×¤×§×™×“ ××—×¨, ×¤× ×” ×œ×× ×”×œ ×”××¢×¨×›×ª.
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // === ××©×ª× ×™× ×’×œ×•×‘×œ×™×™× ===
        let currentUser = null;
        let securitySystem = {
            loginAttempts: {},
            activeSessions: [],
            auditLog: [],
            sessionTimeout: 30, // ×“×§×•×ª
            maxLoginAttempts: 3,
            twoFactorEnabled: true,
            biometricEnabled: true
        };

        // === ××¢×¨×›×ª ××‘×˜×—×” ××ª×§×“××ª ===
        function initSecuritySystem() {
            // ×”×ª×—×œ×ª ×˜×™×™××¨ ×¡×©×Ÿ
            startSessionTimer();
            
            // ××¢×§×‘ ××—×¨ ×¤×¢×™×œ×•×ª ××©×ª××©
            document.addEventListener('click', resetSessionTimer);
            document.addEventListener('keypress', resetSessionTimer);
            
            // ×¢×“×›×•×Ÿ ××™× ×“×™×§×˜×•×¨ ××‘×˜×—×”
            updateSecurityIndicator();
            
            // ×‘×“×™×§×ª ××‘×˜×—×” ×ª×§×•×¤×ª×™×ª
            setInterval(securityCheck, 60000); // ×›×œ ×“×§×”
        }

        function logActivity(action, details = '') {
            const logEntry = {
                timestamp: new Date().toISOString(),
                user: currentUser ? currentUser.name : 'Anonymous',
                action: action,
                details: details,
                ip: '192.168.1.50', // ×¡×™××•×œ×¦×™×”
                userAgent: navigator.userAgent.substring(0, 50) + '...'
            };
            
            securitySystem.auditLog.unshift(logEntry);
            
            // ×”×’×‘×œ×ª ×’×•×“×œ ×”×œ×•×’
            if (securitySystem.auditLog.length > 1000) {
                securitySystem.auditLog = securitySystem.auditLog.slice(0, 1000);
            }
            
            console.log('Security Log:', logEntry);
        }

        function updateSecurityIndicator() {
            const indicator = document.getElementById('securityIndicator');
            const threats = securitySystem.auditLog.filter(log => 
                log.action.includes('failed') || log.action.includes('suspicious')
            ).length;

            if (threats > 5) {
                indicator.className = 'security-indicator danger';
                indicator.innerHTML = 'ğŸš¨ ××™×•××™ ××‘×˜×—×” ×–×•×”×•';
            } else if (threats > 2) {
                indicator.className = 'security-indicator warning';
                indicator.innerHTML = 'âš ï¸ ×¤×¢×™×œ×•×ª ×—×©×•×“×”';
            } else {
                indicator.className = 'security-indicator';
                indicator.innerHTML = 'ğŸ”’ ××¢×¨×›×ª ×××•×‘×˜×—×ª';
            }
        }

        function securityCheck() {
            if (!currentUser) return;
            
            // ×‘×“×™×§×ª ×ª×¤×•×’×ª ×¡×©×Ÿ
            checkSessionTimeout();
            
            // ×‘×“×™×§×ª ×¤×¢×™×œ×•×ª ×—×©×•×“×”
            detectSuspiciousActivity();
            
            // ×¢×“×›×•×Ÿ ××™× ×“×™×§×˜×•×¨
            updateSecurityIndicator();
        }

        let sessionStartTime = null;
        let lastActivityTime = null;

        function startSessionTimer() {
            sessionStartTime = new Date();
            lastActivityTime = new Date();
            updateSessionDisplay();
            
            setInterval(updateSessionDisplay, 1000);
        }

        function resetSessionTimer() {
            lastActivityTime = new Date();
        }

        function updateSessionDisplay() {
            if (!sessionStartTime) return;
            
            const now = new Date();
            const sessionDuration = Math.floor((now - sessionStartTime) / 1000 / 60);
            const timeSinceActivity = Math.floor((now - lastActivityTime) / 1000 / 60);
            
            const timerElement = document.getElementById('sessionTimer');
            if (timerElement) {
                timerElement.textContent = `×¡×©×Ÿ: ${sessionDuration}×“×³`;
                
                if (timeSinceActivity >= securitySystem.sessionTimeout) {
                    handleSessionTimeout();
                }
            }
        }

        function checkSessionTimeout() {
            if (!lastActivityTime) return;
            
            const now = new Date();
            const minutesSinceActivity = Math.floor((now - lastActivityTime) / 1000 / 60);
            
            if (minutesSinceActivity >= securitySystem.sessionTimeout) {
                handleSessionTimeout();
            }
        }

        function handleSessionTimeout() {
            logActivity('session_timeout', 'User session expired due to inactivity');
            showAppMessage('â° ×”×¡×©×Ÿ ×¤×’ ×ª×•×§×£ ×¢×§×‘ ×—×•×¡×¨ ×¤×¢×™×œ×•×ª', 'warning');
            setTimeout(() => {
                handleLogout();
            }, 3000);
        }

        function detectSuspiciousActivity() {
            // ×“××™×•×Ÿ ×–×™×”×•×™ ×¤×¢×™×œ×•×ª ×—×©×•×“×”
            const recentLogs = securitySystem.auditLog.slice(0, 10);
            const failedLogins = recentLogs.filter(log => log.action.includes('failed')).length;
            
            if (failedLogins > 3) {
                logActivity('suspicious_activity_detected', `Multiple failed login attempts: ${failedLogins}`);
                showAppMessage('ğŸš¨ ×–×•×”×ª×” ×¤×¢×™×œ×•×ª ×—×©×•×“×” - × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª ×›×•×©×œ×™× ××¨×•×‘×™×', 'error');
            }
        }

        // === ×¤×•× ×§×¦×™×•×ª ××™××•×ª ××ª×§×“××•×ª ===
        function performBiometricAuth() {
            const scanner = document.querySelector('.biometric-scanner');
            scanner.innerHTML = 'ğŸ”„';
            scanner.style.animation = 'none';
            
            showMessage('ğŸ” ××‘×¦×¢ ×¡×¨×™×§×” ×‘×™×•××˜×¨×™×ª...', 'info');
            
            setTimeout(() => {
                // ×¡×™××•×œ×¦×™×” ×©×œ ×”×¦×œ×—×”/×›×™×©×œ×•×Ÿ ××§×¨××™
                const success = Math.random() > 0.2; // 80% ×”×¦×œ×—×”
                
                if (success) {
                    scanner.innerHTML = 'âœ…';
                    scanner.style.borderColor = 'var(--success)';
                    showMessage('âœ… ××™××•×ª ×‘×™×•××˜×¨×™ ×”×¦×œ×™×—!', 'success');
                    logActivity('biometric_auth_success', 'Biometric authentication successful');
                    
                    setTimeout(() => {
                        if (securitySystem.twoFactorEnabled) {
                            showTwoFactorAuth();
                        } else {
                            completeLogin();
                        }
                    }, 1000);
                } else {
                    scanner.innerHTML = 'âŒ';
                    scanner.style.borderColor = 'var(--error)';
                    showMessage('âŒ ××™××•×ª ×‘×™×•××˜×¨×™ × ×›×©×œ! × ×¡×” ×©×•×‘', 'error');
                    logActivity('biometric_auth_failed', 'Biometric authentication failed');
                    
                    setTimeout(() => {
                        scanner.innerHTML = 'ğŸ‘†';
                        scanner.style.borderColor = 'var(--primary)';
                        scanner.style.animation = 'scan 2s infinite';
                    }, 2000);
                }
            }, 2000);
        }

        function skipBiometric() {
            logActivity('biometric_auth_skipped', 'User skipped biometric authentication');
            if (securitySystem.twoFactorEnabled) {
                showTwoFactorAuth();
            } else {
                completeLogin();
            }
        }

        function showTwoFactorAuth() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('biometricAuth').style.display = 'none';
            document.getElementById('twoFactorAuth').style.display = 'block';
            
            // ×¡×™××•×œ×¦×™×” ×©×œ ×©×œ×™×—×ª SMS
            const phoneNumber = '***-***-1234';
            showMessage(`ğŸ“± ×§×•×“ ××™××•×ª × ×©×œ×— ×œ-${phoneNumber}`, 'info');
            logActivity('2fa_code_sent', `Code sent to ${phoneNumber}`);
        }

        function moveToNext(current, index) {
            if (current.value.length === 1) {
                const inputs = document.querySelectorAll('.two-factor-input input');
                if (index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
                
                // ×‘×“×™×§×” ××•×˜×•××˜×™×ª ×›×©×›×œ ×”×§×•×“×™× ××•×œ××•
                const allFilled = Array.from(inputs).every(input => input.value.length === 1);
                if (allFilled) {
                    setTimeout(() => verifyTwoFactor(), 500);
                }
            }
        }

        function verifyTwoFactor() {
            const inputs = document.querySelectorAll('.two-factor-input input');
            const code = Array.from(inputs).map(input => input.value).join('');
            
            if (code.length !== 6) {
                showMessage('×™×© ×œ×”×–×™×Ÿ ×§×•×“ ×‘×Ÿ 6 ×¡×¤×¨×•×ª', 'error');
                return;
            }
            
            showMessage('ğŸ” ××××ª ×§×•×“...', 'info');
            
            // ×¡×™××•×œ×¦×™×” ×©×œ ××™××•×ª
            setTimeout(() => {
                // ×§×•×“ × ×›×•×Ÿ ×œ×“××•: 123456
                if (code === '123456' || Math.random() > 0.3) {
                    showMessage('âœ… ×”×§×•×“ ××•××ª ×‘×”×¦×œ×—×”!', 'success');
                    logActivity('2fa_success', 'Two-factor authentication successful');
                    setTimeout(() => completeLogin(), 1000);
                } else {
                    showMessage('âŒ ×§×•×“ ×©×’×•×™! × ×¡×” ×©×•×‘', 'error');
                    logActivity('2fa_failed', 'Two-factor authentication failed');
                    // ××™×¤×•×¡ ×”×©×“×•×ª
                    inputs.forEach(input => {
                        input.value = '';
                        input.style.borderColor = 'var(--error)';
                    });
                    setTimeout(() => {
                        inputs.forEach(input => input.style.borderColor = 'var(--gray-200)');
                        inputs[0].focus();
                    }, 1000);
                }
            }, 1500);
        }

        function resendCode() {
            showMessage('ğŸ“± ×§×•×“ ×—×“×© × ×©×œ×—!', 'info');
            logActivity('2fa_code_resent', 'User requested new 2FA code');
        }

        function completeLogin() {
            logActivity('login_success', `User ${currentUser.name} logged in successfully`);
            showApp();
        }

        // === ×¤×•× ×§×¦×™×•×ª ×©×—×–×•×¨ ×¡×™×¡××” ===
        function showForgotPassword() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('forgotPasswordForm').style.display = 'block';
        }

        function backToLogin() {
            document.getElementById('forgotPasswordForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        function sendPasswordReset() {
            const email = document.getElementById('resetEmail').value;
            
            if (!email) {
                showMessage('×™×© ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ', 'error');
                return;
            }
            
            showMessage('ğŸ“§ ×§×™×©×•×¨ ××™×¤×•×¡ × ×©×œ×— ×œ××™××™×™×œ!', 'success');
            logActivity('password_reset_requested', `Password reset requested for ${email}`);
            
            setTimeout(() => {
                backToLogin();
            }, 2000);
        }

        // === ×¤×•× ×§×¦×™×•×ª ××‘×˜×—×” ××ª×§×“××•×ª ×‘××¢×¨×›×ª ===
        function showSecurityPanel() {
            showSection('security');
        }

        function runSecurityScan() {
            showAppMessage('ğŸ” ××¨×™×¥ ×¡×¨×™×§×ª ××‘×˜×—×” ××§×™×¤×”...', 'info');
            
            setTimeout(() => {
                const threats = Math.floor(Math.random() * 5);
                const vulnerabilities = Math.floor(Math.random() * 3);
                
                logActivity('security_scan_completed', `Found ${threats} threats, ${vulnerabilities} vulnerabilities`);
                
                if (threats > 0 || vulnerabilities > 0) {
                    showAppMessage(`âš ï¸ ×”×¡×¨×™×§×” ×”×•×©×œ××”: × ××¦××• ${threats} ××™×•××™× ×•-${vulnerabilities} ×¤×’×™×¢×•×™×•×ª`, 'warning');
                } else {
                    showAppMessage('âœ… ×”×¡×¨×™×§×” ×”×•×©×œ××”: ×œ× × ××¦××• ××™×•××™× ××• ×¤×’×™×¢×•×™×•×ª!', 'success');
                }
            }, 3000);
        }

        function lockSuspiciousAccounts() {
            showAppMessage('ğŸ”’ × ×•×¢×œ ×—×©×‘×•× ×•×ª ×—×©×•×“×™×...', 'warning');
            
            setTimeout(() => {
                const lockedAccounts = Math.floor(Math.random() * 3) + 1;
                logActivity('suspicious_accounts_locked', `Locked ${lockedAccounts} suspicious accounts`);
                showAppMessage(`ğŸ”’ ${lockedAccounts} ×—×©×‘×•× ×•×ª ×—×©×•×“×™× × × ×¢×œ×• ×‘×”×¦×œ×—×”`, 'success');
            }, 2000);
        }

        function runBackup() {
            showAppMessage('ğŸ’¾ ××ª×—×™×œ ×’×™×‘×•×™ ××™×™×“×™...', 'info');
            
            setTimeout(() => {
                logActivity('backup_completed', 'Manual backup completed successfully');
                showAppMessage('âœ… ×”×’×™×‘×•×™ ×”×•×©×œ× ×‘×”×¦×œ×—×”! ×›×œ ×”× ×ª×•× ×™× ××•×’×‘×™×', 'success');
            }, 4000);
        }

        function exportSecurityLog() {
            showAppMessage('ğŸ“¤ ××™×™×¦× ×œ×•×’ ××‘×˜×—×”...', 'info');
            
            setTimeout(() => {
                const logData = securitySystem.auditLog.map(entry => 
                    `${entry.timestamp} | ${entry.user} | ${entry.action} | ${entry.details}`
                ).join('\n');
                
                const blob = new Blob([logData], { type: 'text/plain;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `security_log_${new Date().toISOString().split('T')[0]}.txt`;
                link.click();
                URL.revokeObjectURL(link.href);
                
                logActivity('security_log_exported', 'Security log exported');
                showAppMessage('âœ… ×œ×•×’ ×”××‘×˜×—×” ×™×•×¦× ×‘×”×¦×œ×—×”!', 'success');
            }, 1000);
        }

        function emergencyLockdown() {
            const confirm = window.confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×¦×¢ × ×¢×™×œ×ª ×—×™×¨×•×? ×¤×¢×•×œ×” ×–×• ×ª× ×ª×§ ××ª ×›×œ ×”××©×ª××©×™×!');
            
            if (confirm) {
                showAppMessage('ğŸš¨ ××‘×¦×¢ × ×¢×™×œ×ª ×—×™×¨×•×! ×× ×ª×§ ××ª ×›×œ ×”××©×ª××©×™×...', 'error');
                logActivity('emergency_lockdown_initiated', 'System emergency lockdown initiated');
                
                setTimeout(() => {
                    showAppMessage('ğŸ”’ × ×¢×™×œ×ª ×—×™×¨×•× ×”×•×©×œ××”. ×”××¢×¨×›×ª × ×¢×•×œ×”', 'error');
                    setTimeout(() => {
                        handleLogout();
                    }, 2000);
                }, 3000);
            }
        }

        function refreshActivityLog() {
            showAppMessage('ğŸ”„ ××¨×¢× ×Ÿ ×œ×•×’ ×¤×¢×™×œ×•×ª...', 'info');
            
            // ×”×•×¡×¤×ª ×›××” ×¨×©×•××•×ª ×“××• ×—×“×©×•×ª
            const demoActions = [
                'file_accessed',
                'report_generated', 
                'user_created',
                'settings_changed',
                'login_attempt'
            ];
            
            setTimeout(() => {
                const randomAction = demoActions[Math.floor(Math.random() * demoActions.length)];
                logActivity(randomAction, 'Demo activity for refresh');
                
                updateActivityLogDisplay();
                showAppMessage('âœ… ×œ×•×’ ×”×¤×¢×™×œ×•×ª ×¢×•×“×›×Ÿ', 'success');
            }, 1000);
        }

        function updateActivityLogDisplay() {
            const logContainer = document.getElementById('activityLog');
            if (!logContainer) return;
            
            const recentLogs = securitySystem.auditLog.slice(0, 10);
            logContainer.innerHTML = recentLogs.map(log => {
                const timeStr = new Date(log.timestamp).toLocaleTimeString('he-IL');
                const className = log.action.includes('failed') || log.action.includes('suspicious') ? 'error' :
                                 log.action.includes('warning') ? 'warning' :
                                 log.action.includes('success') ? 'success' : '';
                
                return `
                    <div class="log-entry ${className}">
                        <span>${log.action} - ${log.user}</span>
                        <span>${timeStr}</span>
                    </div>
                `;
            }).join('');
        }

        function generateSecurityReport() {
            showAppMessage('ğŸ“Š ××›×™×Ÿ ×“×•×— ××‘×˜×—×” ××§×™×£...', 'info');
            
            setTimeout(() => {
                const securityData = {
                    summary: {
                        '×¡×”"×› ××™×¨×•×¢×™ ××‘×˜×—×”': securitySystem.auditLog.length,
                        '××©×ª××©×™× ×¤×¢×™×œ×™×': 24,
                        '× ×™×¡×™×•× ×•×ª ×›×™×©×œ×•×Ÿ': securitySystem.auditLog.filter(log => log.action.includes('failed')).length,
                        '×¨××ª ××‘×˜×—×”': '98%',
                        '×¢×“×›×•×Ÿ ××—×¨×•×Ÿ': new Date().toLocaleDateString('he-IL')
                    },
                    securityEvents: securitySystem.auditLog.slice(0, 20).map(log => ({
                        '×–××Ÿ': new Date(log.timestamp).toLocaleString('he-IL'),
                        '××©×ª××©': log.user,
                        '×¤×¢×•×œ×”': log.action,
                        '×¤×¨×˜×™×': log.details || 'N/A',
                        'IP': log.ip || 'N/A'
                    }))
                };
                
                showSecurityReportModal('×“×•×— ××‘×˜×—×” ××§×™×£', securityData);
                logActivity('security_report_generated', 'Comprehensive security report generated');
            }, 2000);
        }

        function showSecurityReportModal(title, data) {
            const modalHtml = `
                <div id="securityReportModal" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0, 0, 0, 0.5); display: flex; align-items: center;
                    justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease;
                ">
                    <div style="
                        background: white; border-radius: 20px; max-width: 95%; width: 1200px;
                        max-height: 90vh; overflow-y: auto; animation: slideIn 0.3s ease;
                    ">
                        <div style="
                            background: linear-gradient(135deg, var(--error), #dc2626);
                            color: white; padding: 1.5rem; border-radius: 20px 20px 0 0;
                            display: flex; justify-content: space-between; align-items: center;
                        ">
                            <h2 style="margin: 0;">ğŸ”’ ${title} - ${new Date().toLocaleDateString('he-IL')}</h2>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <button onclick="downloadSecurityReport('${title}')" style="
                                    background: rgba(255, 255, 255, 0.2); border: none; color: white;
                                    padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;
                                ">ğŸ’¾ ×”×•×¨×“</button>
                                <button onclick="closeModal('securityReportModal')" style="
                                    background: rgba(255, 255, 255, 0.2); border: none; color: white;
                                    font-size: 1.5rem; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
                                ">&times;</button>
                            </div>
                        </div>

                        <div style="padding: 2rem;">
                            <!-- ×¡×™×›×•× ××‘×˜×—×” -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸ“Š ×¡×™×›×•× ××¦×‘ ××‘×˜×—×”</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                    ${Object.entries(data.summary).map(([key, value]) => `
                                        <div style="text-align: center; padding: 1rem; background: var(--gray-50); border-radius: 8px;">
                                            <h4 style="margin-bottom: 0.5rem;">${key}</h4>
                                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--error);">${value}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- ××™×¨×•×¢×™ ××‘×˜×—×” -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸš¨ ××™×¨×•×¢×™ ××‘×˜×—×” ××—×¨×•× ×™×</div>
                                </div>
                                ${generateTable(data.securityEvents)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            showAppMessage('âœ… ×“×•×— ×”××‘×˜×—×” × ×•×¦×¨ ×‘×”×¦×œ×—×”!', 'success');
        }

        function downloadSecurityReport(title) {
            showAppMessage('ğŸ’¾ ××›×™×Ÿ ×§×•×‘×¥ ×“×•×— ××‘×˜×—×” ×œ×”×•×¨×“×”...', 'info');
            
            setTimeout(() => {
                let content = `${title} - ${new Date().toLocaleDateString('he-IL')}\n`;
                content += `× ×•×¦×¨ ×¢×œ ×™×“×™: ${currentUser.name}\n`;
                content += `×ª××¨×™×š ×•×©×¢×”: ${new Date().toLocaleString('he-IL')}\n`;
                content += '='.repeat(60) + '\n\n';
                
                content += '×¡×™×›×•× ××¦×‘ ××‘×˜×—×”:\n';
                content += `- ×¡×”"×› ××™×¨×•×¢×™ ××‘×˜×—×”: ${securitySystem.auditLog.length}\n`;
                content += `- ××©×ª××©×™× ×¤×¢×™×œ×™×: 24\n`;
                content += `- × ×™×¡×™×•× ×•×ª ×›×™×©×œ×•×Ÿ: ${securitySystem.auditLog.filter(log => log.action.includes('failed')).length}\n`;
                content += `- ×¨××ª ××‘×˜×—×”: 98%\n\n`;
                
                content += '××™×¨×•×¢×™ ××‘×˜×—×” ××—×¨×•× ×™×:\n';
                content += '-'.repeat(60) + '\n';
                securitySystem.auditLog.slice(0, 50).forEach(log => {
                    content += `${new Date(log.timestamp).toLocaleString('he-IL')} | ${log.user} | ${log.action}\n`;
                    if (log.details) content += `  ×¤×¨×˜×™×: ${log.details}\n`;
                    content += '\n';
                });
                
                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `×“×•×—_××‘×˜×—×”_${new Date().toISOString().split('T')[0]}.txt`;
                link.click();
                URL.revokeObjectURL(link.href);
                
                logActivity('security_report_downloaded', 'Security report downloaded');
                showAppMessage('âœ… ×“×•×— ×”××‘×˜×—×” ×”×•×¨×“ ×‘×”×¦×œ×—×”!', 'success');
            }, 1000);
        }

        function saveSecuritySettings() {
            showAppMessage('ğŸ”’ ×©×•××¨ ×”×’×“×¨×•×ª ××‘×˜×—×”...', 'info');
            
            setTimeout(() => {
                logActivity('security_settings_updated', 'Security settings updated');
                showAppMessage('âœ… ×”×’×“×¨×•×ª ×”××‘×˜×—×” × ×©××¨×• ×‘×”×¦×œ×—×”!', 'success');
            }, 1000);
        }

        function demonstrateSecurityScan() {
            showAppMessage('ğŸ” ××“××” ×¡×¨×™×§×ª ××‘×˜×—×” ××ª×§×“××ª...', 'info');
            
            setTimeout(() => showAppMessage('ğŸ”„ ×¡×•×¨×§ ×¨×©×ª...', 'info'), 1000);
            setTimeout(() => showAppMessage('ğŸ”„ ×‘×•×“×§ ×”×¨×©××•×ª...', 'info'), 2000);
            setTimeout(() => showAppMessage('ğŸ”„ ×× ×ª×— ×œ×•×’×™×...', 'info'), 3000);
            setTimeout(() => showAppMessage('âœ… ×”×¡×¨×™×§×” ×”×•×©×œ××”! ×œ× × ××¦××• ××™×•××™×', 'success'), 4000);
        }

        // === × ×ª×•× ×™ ×ª×œ××™×“×™× ===
        const studentsData = {
            'sarah_martins': {
                id: 'sarah_martins',
                firstName: '×©×¨×”',
                lastName: '××¨×˜×™× ×¡',
                grade: '×–',
                studentId: '123456789',
                riskLevel: 'high',
                avatar: 'ğŸ‘§',
                lastUpdate: '21/01/2024 10:30',
                personalInfo: {
                    birthDate: '15/03/2010',
                    address: '×¨×—×•×‘ ×”×“×¡ 12, ×ª×œ ××‘×™×‘',
                    phone: '03-1234567',
                    parentName: '×“×™× ×” ××¨×˜×™× ×¡',
                    parentPhone: '050-1234567'
                },
                academicInfo: {
                    averageGrade: 78,
                    attendance: 85,
                    subjects: [
                        { name: '××ª××˜×™×§×”', grade: 75, trend: 'down' },
                        { name: '×¢×‘×¨×™×ª', grade: 82, trend: 'stable' },
                        { name: '×× ×’×œ×™×ª', grade: 88, trend: 'up' },
                        { name: '××“×¢×™×', grade: 70, trend: 'down' }
                    ]
                },
                behaviorInfo: {
                    incidents: 3,
                    lastIncident: '18/01/2024',
                    notes: '××¨××” ×¡×™×× ×™ ×‘×“×™×“×•×ª ×•× ×¡×™×’×” ×—×‘×¨×ª×™×ª'
                },
                alerts: [
                    {
                        id: 'alert_001',
                        type: 'social',
                        severity: 'high',
                        status: 'new',
                        title: '×‘×“×™×“×•×ª ×—×‘×¨×ª×™×ª',
                        description: '×”×ª×œ××™×“×” × ×× ×¢×ª ××¤×¢×™×œ×•×™×•×ª ×—×‘×¨×ª×™×•×ª ×•××‘×œ×” ×œ×‘×“×” ×‘×”×¤×¡×§×•×ª',
                        createdAt: '21/01/2024 08:30',
                        createdBy: '××•×¨×” ×¨×—×œ ×›×”×Ÿ'
                    },
                    {
                        id: 'alert_002',
                        type: 'academic',
                        severity: 'medium',
                        status: 'in_progress',
                        title: '×™×¨×™×“×” ×‘×¦×™×•× ×™× ×‘××ª××˜×™×§×”',
                        description: '×™×¨×™×“×” ×©×œ 15 × ×§×•×“×•×ª ×‘×××•×¦×¢ ×‘××ª××˜×™×§×” ×‘×—×•×“×© ×”××—×¨×•×Ÿ',
                        createdAt: '18/01/2024 14:20',
                        createdBy: '××•×¨×” ××ª××˜×™×§×”'
                    }
                ]
            },
            'david_levi': {
                id: 'david_levi',
                firstName: '×“×•×“',
                lastName: '×œ×•×™',
                grade: '×—',
                studentId: '987654321',
                riskLevel: 'medium',
                avatar: 'ğŸ‘¦',
                lastUpdate: '20/01/2024 14:20',
                personalInfo: {
                    birthDate: '22/07/2009',
                    address: '×¨×—×•×‘ ×”×¨×¦×œ 45, ×¨××ª ×’×Ÿ',
                    phone: '03-9876543',
                    parentName: '××©×” ×œ×•×™',
                    parentPhone: '052-9876543'
                },
                academicInfo: {
                    averageGrade: 82,
                    attendance: 92,
                    subjects: [
                        { name: '××ª××˜×™×§×”', grade: 85, trend: 'up' },
                        { name: '×¢×‘×¨×™×ª', grade: 78, trend: 'stable' },
                        { name: '×× ×’×œ×™×ª', grade: 80, trend: 'stable' },
                        { name: '××“×¢×™×', grade: 88, trend: 'up' }
                    ]
                },
                behaviorInfo: {
                    incidents: 2,
                    lastIncident: '15/01/2024',
                    notes: '×‘×¢×™×•×ª ×§×œ×•×ª ×‘×”×ª× ×”×’×•×ª, ××¤×¨×™×¢ ××“×™ ×¤×¢× ×‘×©×™×¢×•×¨'
                },
                alerts: [
                    {
                        id: 'alert_003',
                        type: 'behavior',
                        severity: 'medium',
                        status: 'in_progress',
                        title: '×”×¤×¨×¢×” ×‘×©×™×¢×•×¨',
                        description: '××¤×¨×™×¢ ×œ×—×‘×¨×™× ×‘×›×™×ª×” ×•××§×©×” ×¢×œ ×”××•×¨×” ×œ×”××©×™×š ×‘×©×™×¢×•×¨',
                        createdAt: '20/01/2024 11:45',
                        createdBy: '××•×¨×” ×¨×—×œ ×›×”×Ÿ'
                    }
                ]
            },
            'michal_cohen': {
                id: 'michal_cohen',
                firstName: '××™×›×œ',
                lastName: '×›×”×Ÿ',
                grade: '×•',
                studentId: '456789123',
                riskLevel: 'low',
                avatar: 'ğŸ‘§',
                lastUpdate: '19/01/2024 09:15',
                personalInfo: {
                    birthDate: '10/11/2010',
                    address: '×¨×—×•×‘ ×‘×Ÿ ×’×•×¨×™×•×Ÿ 8, ×¤×ª×— ×ª×§×•×•×”',
                    phone: '03-5555555',
                    parentName: '×™×¢×œ ×›×”×Ÿ',
                    parentPhone: '054-5555555'
                },
                academicInfo: {
                    averageGrade: 92,
                    attendance: 98,
                    subjects: [
                        { name: '××ª××˜×™×§×”', grade: 95, trend: 'up' },
                        { name: '×¢×‘×¨×™×ª', grade: 90, trend: 'stable' },
                        { name: '×× ×’×œ×™×ª', grade: 94, trend: 'up' },
                        { name: '××“×¢×™×', grade: 89, trend: 'stable' }
                    ]
                },
                behaviorInfo: {
                    incidents: 0,
                    lastIncident: '××™×Ÿ',
                    notes: '×ª×œ××™×“×” ××¦×˜×™×™× ×ª ×¢× ×”×ª× ×”×’×•×ª ××•×¤×ª×™×ª'
                },
                alerts: []
            }
        };

        // === ×¤×•× ×§×¦×™×•×ª ×”×ª×—×‘×¨×•×ª ××ª×§×“××•×ª ===
        function showRegisterPage() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('appPage').style.display = 'none';
            document.getElementById('registerPage').style.display = 'flex';
        }

        function showLoginPage() {
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('appPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
        }

        async function handleRegister(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('regFirstName').value.trim();
            const lastName = document.getElementById('regLastName').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const phone = document.getElementById('regPhone').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const role = document.getElementById('regRole').value;
            const institution = document.getElementById('regInstitution').value.trim();

            // ×‘×“×™×§×•×ª ××™××•×ª ××ª×§×“××•×ª
            if (!firstName || !lastName || !email || !phone || !password || !role || !institution) {
                showRegisterMessage('×™×© ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”× ×“×¨×©×™×', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showRegisterMessage('×”×¡×™×¡×××•×ª ××™× ×Ÿ ×ª×•×××•×ª', 'error');
                return;
            }

            if (password.length < 8) {
                showRegisterMessage('×”×¡×™×¡××” ×—×™×™×‘×ª ×œ×”×›×™×œ ×œ×¤×—×•×ª 8 ×ª×•×•×™×', 'error');
                return;
            }

            // ×‘×“×™×§×ª ×—×•×–×§ ×¡×™×¡××”
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasNumbers = /\d/.test(password);
            const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);

            if (!hasUpperCase || !hasLowerCase || !hasNumbers || !hasSpecialChar) {
                showRegisterMessage('×”×¡×™×¡××” ×—×™×™×‘×ª ×œ×”×›×™×œ ××•×ª×™×•×ª ×’×“×•×œ×•×ª, ×§×˜× ×•×ª, ××¡×¤×¨×™× ×•×ª×• ××™×•×—×“', 'error');
                return;
            }

            // ×‘×“×™×§×ª ×¤×•×¨××˜ ××™××™×™×œ
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showRegisterMessage('×›×ª×•×‘×ª ×”××™××™×™×œ ××™× ×” ×ª×§×™× ×”', 'error');
                return;
            }

            // ×‘×“×™×§×ª ×¤×•×¨××˜ ×˜×œ×¤×•×Ÿ
            const phoneRegex = /^05[0-9]-?[0-9]{7}$|^0[2-9]-?[0-9]{7,8}$/;
            if (!phoneRegex.test(phone.replace(/\s/g, ''))) {
                showRegisterMessage('××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ××™× ×• ×ª×§×™×Ÿ', 'error');
                return;
            }

            const btn = event.target.querySelector('button[type="submit"]');
            btn.textContent = '× ×¨×©×...';
            btn.disabled = true;

            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const newUser = {
                    username: email,
                    name: `${firstName} ${lastName}`,
                    email: email,
                    phone: phone,
                    role: role,
                    institution: institution,
                    registeredAt: new Date(),
                    isVerified: false
                };

                logActivity('user_registered', `New user registered: ${newUser.name} (${newUser.role})`);
                showRegisterMessage(`ğŸ‰ ×‘×¨×•×š ×”×‘× ${firstName}! ×”×—×©×‘×•×Ÿ × ×•×¦×¨ ×‘×”×¦×œ×—×”. × ×©×œ×— ××œ×™×š ××™××™×™×œ ××™××•×ª.`, 'success');
                
                setTimeout(() => {
                    currentUser = newUser;
                    showApp();
                }, 3000);

            } catch (error) {
                console.error('×©×’×™××” ×‘×”×¨×©××”:', error);
                showRegisterMessage('×©×’×™××” ×‘×”×¨×©××”. × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.', 'error');
                btn.textContent = '×”×™×¨×©× ×œ××¢×¨×›×ª';
                btn.disabled = false;
            }
        }

        function showRegisterMessage(message, type = 'info') {
            const container = document.getElementById('registerMessageContainer');
            container.innerHTML = '';
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            messageElement.textContent = message;
            container.appendChild(messageElement);
            
            if (type !== 'error') {
                setTimeout(() => {
                    if (messageElement.parentNode) messageElement.remove();
                }, 5000);
            }
        }

        // ×”×ª×—×‘×¨×•×ª ××¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª ×¢× ×¨×™×©×•× ××‘×˜×—×”
        function loginWithFacebook() {
            showMessage('××ª×—×‘×¨ ×“×¨×š Facebook...', 'info');
            logActivity('social_login_attempt', 'Facebook login attempted');
            
            setTimeout(() => {
                currentUser = {
                    username: 'facebook_user',
                    name: '××©×ª××© Facebook',
                    role: 'teacher',
                    loginMethod: 'facebook'
                };
                logActivity('social_login_success', 'Facebook login successful');
                showMessage('×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×” ×“×¨×š Facebook! ğŸ“˜', 'success');
                setTimeout(() => showApp(), 1000);
            }, 2000);
        }

        function loginWithGoogle() {
            showMessage('××ª×—×‘×¨ ×“×¨×š Google...', 'info');
            logActivity('social_login_attempt', 'Google login attempted');
            
            setTimeout(() => {
                currentUser = {
                    username: 'google_user',
                    name: '××©×ª××© Google',
                    role: 'teacher',
                    loginMethod: 'google'
                };
                logActivity('social_login_success', 'Google login successful');
                showMessage('×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×” ×“×¨×š Google! ğŸ”', 'success');
                setTimeout(() => showApp(), 1000);
            }, 2000);
        }

        function loginWithTwitter() {
            showMessage('××ª×—×‘×¨ ×“×¨×š Twitter...', 'info');
            logActivity('social_login_attempt', 'Twitter login attempted');
            
            setTimeout(() => {
                currentUser = {
                    username: 'twitter_user',
                    name: '××©×ª××© Twitter',
                    role: 'teacher',
                    loginMethod: 'twitter'
                };
                logActivity('social_login_success', 'Twitter login successful');
                showMessage('×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×” ×“×¨×š Twitter! ğŸ¦', 'success');
                setTimeout(() => showApp(), 1000);
            }, 2000);
        }

        function registerWithFacebook() {
            showRegisterMessage('× ×¨×©× ×“×¨×š Facebook...', 'info');
            logActivity('social_registration_attempt', 'Facebook registration attempted');
            
            setTimeout(() => {
                currentUser = {
                    username: 'new_facebook_user',
                    name: '××©×ª××© ×—×“×© Facebook',
                    role: 'teacher',
                    loginMethod: 'facebook',
                    registeredAt: new Date()
                };
                logActivity('social_registration_success', 'Facebook registration successful');
                showRegisterMessage('× ×¨×©××ª ×‘×”×¦×œ×—×” ×“×¨×š Facebook! ğŸ“˜', 'success');
                setTimeout(() => showApp(), 1000);
            }, 2000);
        }

        function registerWithGoogle() {
            showRegisterMessage('× ×¨×©× ×“×¨×š Google...', 'info');
            logActivity('social_registration_attempt', 'Google registration attempted');
            
            setTimeout(() => {
                currentUser = {
                    username: 'new_google_user',
                    name: '××©×ª××© ×—×“×© Google',
                    role: 'teacher',
                    loginMethod: 'google',
                    registeredAt: new Date()
                };
                logActivity('social_registration_success', 'Google registration successful');
                showRegisterMessage('× ×¨×©××ª ×‘×”×¦×œ×—×” ×“×¨×š Google! ğŸ”', 'success');
                setTimeout(() => showApp(), 1000);
            }, 2000);
        }

        function registerWithTwitter() {
            showRegisterMessage('× ×¨×©× ×“×¨×š Twitter...', 'info');
            logActivity('social_registration_attempt', 'Twitter registration attempted');
            
            setTimeout(() => {
                currentUser = {
                    username: 'new_twitter_user',
                    name: '××©×ª××© ×—×“×© Twitter',
                    role: 'teacher',
                    loginMethod: 'twitter',
                    registeredAt: new Date()
                };
                logActivity('social_registration_success', 'Twitter registration successful');
                showRegisterMessage('× ×¨×©××ª ×‘×”×¦×œ×—×” ×“×¨×š Twitter! ğŸ¦', 'success');
                setTimeout(() => showApp(), 1000);
            }, 2000);
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            if (!username || !password) {
                showMessage('×™×© ×œ××œ× ×©× ××©×ª××© ×•×¡×™×¡××”', 'error');
                logActivity('login_failed', 'Empty username or password');
                return;
            }

            // ×‘×“×™×§×ª × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª ×›×•×©×œ×™×
            const clientIP = '192.168.1.50'; // ×¡×™××•×œ×¦×™×”
            if (!securitySystem.loginAttempts[clientIP]) {
                securitySystem.loginAttempts[clientIP] = 0;
            }

            if (securitySystem.loginAttempts[clientIP] >= securitySystem.maxLoginAttempts) {
                showMessage('ğŸš« ×”×—×©×‘×•×Ÿ × ×—×¡× ×–×× ×™×ª ×¢×§×‘ × ×™×¡×™×•× ×•×ª ×”×ª×—×‘×¨×•×ª ×›×•×©×œ×™× ××¨×•×‘×™×', 'error');
                logActivity('login_blocked', `IP ${clientIP} blocked due to too many failed attempts`);
                return;
            }

            const btn = document.querySelector('.login-btn');
            btn.textContent = '××ª×—×‘×¨...';
            btn.disabled = true;

            try {
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // ×¡×™××•×œ×¦×™×” ×©×œ ××™××•×ª ××©×ª××©
                const loginSuccess = Math.random() > 0.1; // 90% ×”×¦×œ×—×” ×œ×“××•
                
                if (loginSuccess) {
                    // ××™×¤×•×¡ × ×™×¡×™×•× ×•×ª ×›×•×©×œ×™×
                    securitySystem.loginAttempts[clientIP] = 0;
                    
                    currentUser = {
                        username: username,
                        name: username,
                        role: 'user',
                        loginTime: new Date(),
                        lastActivity: new Date()
                    };

                    logActivity('login_attempt_success', `User ${username} login successful`);
                    showMessage(`×©×œ×•× ${username}! ××ª×—×‘×¨ ×œ××¢×¨×›×ª...`, 'success');
                    
                    // ×”××©×š ×œ×©×œ×‘×™ ××™××•×ª × ×•×¡×¤×™×
                    document.getElementById('loginForm').style.display = 'none';
                    
                    if (securitySystem.biometricEnabled) {
                        document.getElementById('biometricAuth').style.display = 'block';
                    } else if (securitySystem.twoFactorEnabled) {
                        showTwoFactorAuth();
                    } else {
                        setTimeout(() => completeLogin(), 1000);
                    }
                    
                } else {
                    // ×¨×™×©×•× ×›×™×©×œ×•×Ÿ
                    securitySystem.loginAttempts[clientIP]++;
                    const remainingAttempts = securitySystem.maxLoginAttempts - securitySystem.loginAttempts[clientIP];
                    
                    logActivity('login_failed', `Failed login attempt for ${username} from IP ${clientIP}`);
                    
                    if (remainingAttempts > 0) {
                        showMessage(`âŒ ×©× ××©×ª××© ××• ×¡×™×¡××” ×©×’×•×™×™×. × ×•×ª×¨×• ${remainingAttempts} × ×™×¡×™×•× ×•×ª`, 'error');
                    } else {
                        showMessage('ğŸš« ×”×—×©×‘×•×Ÿ × ×—×¡× ×–×× ×™×ª ×¢×§×‘ × ×™×¡×™×•× ×•×ª ×›×•×©×œ×™× ××¨×•×‘×™×', 'error');
                        logActivity('account_locked', `Account locked for IP ${clientIP}`);
                    }
                    
                    btn.textContent = '×”×ª×—×‘×¨ ×œ××¢×¨×›×ª';
                    btn.disabled = false;
                }

            } catch (error) {
                console.error('×©×’×™××” ×‘×”×ª×—×‘×¨×•×ª:', error);
                logActivity('login_error', `Login error: ${error.message}`);
                showMessage('×©×’×™××” ×‘×”×ª×—×‘×¨×•×ª', 'error');
                btn.textContent = '×”×ª×—×‘×¨ ×œ××¢×¨×›×ª';
                btn.disabled = false;
            }
        }

        function quickLogin(name, role) {
            currentUser = {
                username: name,
                name: name,
                role: role,
                loginTime: new Date(),
                lastActivity: new Date(),
                quickLogin: true
            };
            
            logActivity('quick_login_success', `Quick login: ${name} (${role})`);
            showMessage(`×©×œ×•× ${name}! ××ª×—×‘×¨ ×œ××¢×¨×›×ª...`, 'success');
            setTimeout(() => completeLogin(), 1000);
        }

        function showApp() {
            // ×”×¡×ª×¨×ª ×›×œ ×“×¤×™ ×”×”×ª×—×‘×¨×•×ª ×•×”×”×¨×©××”
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('registerPage').style.display = 'none';
            
            // ×”×¦×’×ª ×”××¤×œ×™×§×¦×™×”
            document.getElementById('appPage').style.display = 'block';
            
            // ×¢×“×›×•×Ÿ ×¤×¨×˜×™ ×”××©×ª××©
            document.getElementById('currentUser').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentUser.role || '××©×ª××©';
            
            // ×”×ª×—×œ×ª ××¢×¨×›×•×ª ××‘×˜×—×”
            initSecuritySystem();
            
            // ×•×™×“×•× ×©×œ×•×— ×”×‘×§×¨×” ××•×¦×’ ×›×‘×¨×™×¨×ª ××—×“×œ
            showSection('dashboard');
            
            // ×¨×™×©×•× ×›× ×™×¡×” ×œ××¢×¨×›×ª
            logActivity('app_accessed', `User accessed main application`);
            
            // ×”×•×“×¢×ª ×‘×¨×•×›×™× ×”×‘××™×
            showAppMessage(`ğŸ‰ ×‘×¨×•×›×™× ×”×‘××™× ×œ××¢×¨×›×ª SafeGuard Pro!`, 'success');
        }

        function handleLogout() {
            try {
                // ×¨×™×©×•× ×™×¦×™××”
                if (currentUser) {
                    logActivity('logout', `User ${currentUser.name} logged out`);
                }
                
                // × ×™×§×•×™ × ×ª×•× ×™ ×”××©×ª××© ×•××¢×¨×›×ª ×”××‘×˜×—×”
                currentUser = null;
                sessionStartTime = null;
                lastActivityTime = null;
                
                // ×”×¡×ª×¨×ª ×”××¤×œ×™×§×¦×™×” ×œ×’××¨×™
                document.getElementById('appPage').style.display = 'none';
                document.getElementById('registerPage').style.display = 'none';
                
                // ×”×¦×’×ª ×“×£ ×”×ª×—×‘×¨×•×ª
                document.getElementById('loginPage').style.display = 'flex';
                
                // ××™×¤×•×¡ ×›×œ ×”×˜×¤×¡×™×
                document.getElementById('loginForm').reset();
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('biometricAuth').style.display = 'none';
                document.getElementById('twoFactorAuth').style.display = 'none';
                document.getElementById('forgotPasswordForm').style.display = 'none';
                document.getElementById('messageContainer').innerHTML = '';
                
                if (document.getElementById('registerForm')) {
                    document.getElementById('registerForm').reset();
                    document.getElementById('registerMessageContainer').innerHTML = '';
                }
                
                // ×”×•×“×¢×ª ×”×¦×œ×—×”
                setTimeout(() => {
                    showMessage('×™×¦××ª ××”××¢×¨×›×ª ×‘×”×¦×œ×—×”! ğŸ‘‹', 'success');
                }, 300);
                
                console.log('×™×¦×™××” ×”×•×©×œ××” ×‘×”×¦×œ×—×”');
                
            } catch (error) {
                console.error('×©×’×™××” ×‘×™×¦×™××”:', error);
                // ×’×™×‘×•×™ - ×¨×¢× ×•×Ÿ ×”×“×£ ×× ×™×© ×‘×¢×™×”
                location.reload();
            }
        }

        // === × ×™×•×•×˜ ===
        function showSection(sectionName) {
            // ×‘×“×™×§×ª ×”×¨×©××•×ª
            if (!checkPermission(sectionName)) {
                // ×”×•×“×¢×•×ª ××¤×•×¨×˜×•×ª ×œ×¤×™ ×¡×•×’ ×”×’×™×©×”
                let message = 'âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×’×©×ª ×œ×—×œ×§ ×–×” ×©×œ ×”××¢×¨×›×ª';
                let explanation = '';
                
                if (sectionName === 'reports') {
                    message = 'ğŸ“Š ×’×™×©×” ××•×’×‘×œ×ª ×œ×“×•×—×•×ª';
                    explanation = '×¨×§ ×™×•×¢×¦×™×, ×× ×”×œ×™× ×•×× ×”×œ×™ ××¢×¨×›×ª ×™×›×•×œ×™× ×œ×’×©×ª ×œ×“×•×—×•×ª. ××•×¨×™× ×™×›×•×œ×™× ×œ×¦×¤×•×ª ×‘×ª×œ××™×“×™× ×•×œ×™×¦×•×¨ ×”×ª×¨××•×ª.';
                } else if (sectionName === 'security') {
                    message = 'ğŸ”’ ×’×™×©×” ××•×’×‘×œ×ª ×œ××¨×›×– ××‘×˜×—×”';
                    explanation = '×¨×§ ×× ×”×œ×™ ××¢×¨×›×ª ×™×›×•×œ×™× ×œ×’×©×ª ×œ××¨×›×– ×”××‘×˜×—×” ×•×œ×”×’×“×¨×•×ª ×”××ª×§×“××•×ª.';
                }
                
                showAppMessage(message, 'error');
                if (explanation) {
                    setTimeout(() => {
                        showAppMessage(`ğŸ’¡ ${explanation}`, 'info');
                    }, 2000);
                }
                
                logActivity('permission_denied', `Access denied to section: ${sectionName} (Role: ${currentUser.role})`);
                return;
            }

            // ×”×¡×ª×¨×ª ×›×œ ×”×¡×§×¦×™×•×ª
            document.querySelectorAll('main section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // ×”×¦×’×ª ×”×¡×§×¦×™×” ×”× ×‘×—×¨×ª
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                logActivity('section_accessed', `Accessed section: ${sectionName}`);
            }
            
            // ×¢×“×›×•×Ÿ × ×™×•×•×˜
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navItems = document.querySelectorAll('.nav-item');
            const sectionNames = ['dashboard', 'students', 'alerts', 'reports', 'security', 'settings'];
            const sectionIndex = sectionNames.indexOf(sectionName);
            
            if (sectionIndex !== -1 && navItems[sectionIndex]) {
                navItems[sectionIndex].classList.add('active');
            }

            // ×¢×“×›×•×Ÿ ×ª×¦×•×’×ª ×˜×‘×œ××•×ª ×‘×”×ª×× ×œ×¡×§×¦×™×”
            if (sectionName === 'students') {
                updateStudentsTable();
            } else if (sectionName === 'alerts') {
                updateAlertsTable();
            } else if (sectionName === 'security') {
                updateActivityLogDisplay();
            }
        }

        function checkPermission(sectionName) {
            if (!currentUser) return false;
            
            const permissions = {
                'dashboard': ['teacher', 'counselor', 'principal', 'admin'],
                'students': ['teacher', 'counselor', 'principal', 'admin'],
                'alerts': ['teacher', 'counselor', 'principal', 'admin'],
                'reports': ['counselor', 'principal', 'admin'],
                'security': ['admin'],
                'settings': ['teacher', 'counselor', 'principal', 'admin']
            };
            
            const allowedRoles = permissions[sectionName] || [];
            return allowedRoles.includes(currentUser.role) || currentUser.role === 'admin';
        }

        // === ×¤×¨×•×¤×™×œ ×ª×œ××™×“ ===
        function viewStudentProfile(studentKey) {
            // ×‘×“×™×§×ª ×”×¨×©××” ×œ×¦×¤×™×™×” ×‘×¤×¨×˜×™ ×ª×œ××™×“
            if (!checkPermission('students')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×¦×¤×•×ª ×‘×¤×¨×˜×™ ×ª×œ××™×“×™×', 'error');
                return;
            }

            const student = studentsData[studentKey];
            if (!student) {
                showAppMessage('×ª×œ××™×“ ×œ× × ××¦×', 'error');
                return;
            }

            // ×¨×™×©×•× ×¦×¤×™×™×” ×‘×¤×¨×•×¤×™×œ
            logActivity('student_profile_viewed', `Viewed profile of ${student.firstName} ${student.lastName}`);

            const modalHtml = `
                <div id="studentProfileModal" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0, 0, 0, 0.5); display: flex; align-items: center;
                    justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease;
                ">
                    <div style="
                        background: white; border-radius: 20px; max-width: 900px; width: 90%;
                        max-height: 90vh; overflow-y: auto; animation: slideIn 0.3s ease;
                    ">
                        <div style="
                            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                            color: white; padding: 2rem; border-radius: 20px 20px 0 0;
                            display: flex; align-items: center; gap: 1rem;
                        ">
                            <div style="font-size: 4rem;">${student.avatar}</div>
                            <div>
                                <h2 style="margin: 0; font-size: 2rem;">${student.firstName} ${student.lastName}</h2>
                                <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">×›×™×ª×” ${student.grade} â€¢ ××¡×¤×¨ ×–×”×•×ª: ${student.studentId}</p>
                                <span class="status-badge status-${student.riskLevel}" style="margin-top: 0.5rem; display: inline-block;">
                                    ×¨××ª ×¡×™×›×•×Ÿ: ${getRiskLevelText(student.riskLevel)}
                                </span>
                            </div>
                            <button onclick="closeStudentProfile()" style="
                                margin-right: auto; background: rgba(255, 255, 255, 0.2);
                                border: none; color: white; font-size: 1.5rem; width: 40px;
                                height: 40px; border-radius: 50%; cursor: pointer;
                            ">&times;</button>
                        </div>

                        <div style="padding: 2rem;">
                            <!-- ×¤×¨×˜×™× ××™×©×™×™× -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸ‘¤ ×¤×¨×˜×™× ××™×©×™×™×</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <div><strong>×ª××¨×™×š ×œ×™×“×”:</strong> ${student.personalInfo.birthDate}</div>
                                    <div><strong>×›×ª×•×‘×ª:</strong> ${student.personalInfo.address}</div>
                                    <div><strong>×˜×œ×¤×•×Ÿ ×‘×™×ª:</strong> ${student.personalInfo.phone}</div>
                                    <div><strong>×©× ×”×•×¨×”:</strong> ${student.personalInfo.parentName}</div>
                                    <div><strong>×˜×œ×¤×•×Ÿ ×”×•×¨×”:</strong> ${student.personalInfo.parentPhone}</div>
                                    <div><strong>×¢×“×›×•×Ÿ ××—×¨×•×Ÿ:</strong> ${student.lastUpdate}</div>
                                </div>
                            </div>

                            <!-- ×‘×™×¦×•×¢×™× ××§×“××™×™× -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸ“š ×‘×™×¦×•×¢×™× ××§×“××™×™×</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                    <div style="text-align: center; padding: 1rem; background: var(--gray-50); border-radius: 10px;">
                                        <h4>×××•×¦×¢ ×›×œ×œ×™</h4>
                                        <div style="font-size: 2rem; font-weight: bold; color: var(--success);">${student.academicInfo.averageGrade}</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: var(--gray-50); border-radius: 10px;">
                                        <h4>××—×•×– × ×•×›×—×•×ª</h4>
                                        <div style="font-size: 2rem; font-weight: bold; color: var(--info);">${student.academicInfo.attendance}%</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: var(--gray-50); border-radius: 10px;">
                                        <h4>××¡×¤×¨ ××§×¦×•×¢×•×ª</h4>
                                        <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">${student.academicInfo.subjects.length}</div>
                                    </div>
                                </div>
                                
                                <table class="table">
                                    <thead>
                                        <tr><th>××§×¦×•×¢</th><th>×¦×™×•×Ÿ</th><th>××’××”</th></tr>
                                    </thead>
                                    <tbody>
                                        ${student.academicInfo.subjects.map(subject => `
                                            <tr>
                                                <td>${subject.name}</td>
                                                <td><strong>${subject.grade}</strong></td>
                                                <td>
                                                    ${subject.trend === 'up' ? 'ğŸ“ˆ ×¢×•×œ×”' : 
                                                      subject.trend === 'down' ? 'ğŸ“‰ ×™×•×¨×“×ª' : 'ğŸ“Š ×™×¦×™×‘×”'}
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>

                            <!-- ××™×“×¢ ×”×ª× ×”×’×•×ª×™ -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸ­ ××™×“×¢ ×”×ª× ×”×’×•×ª×™</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1rem;">
                                    <div><strong>××¡×¤×¨ ×ª×§×¨×™×•×ª:</strong> ${student.behaviorInfo.incidents}</div>
                                    <div><strong>×ª×§×¨×™×ª ××—×¨×•× ×”:</strong> ${student.behaviorInfo.lastIncident}</div>
                                </div>
                                <div style="background: var(--gray-50); padding: 1rem; border-radius: 10px;">
                                    <strong>×”×¢×¨×•×ª:</strong><br>${student.behaviorInfo.notes}
                                </div>
                            </div>

                            <!-- ×”×ª×¨××•×ª ×¤×¢×™×œ×•×ª -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸš¨ ×”×ª×¨××•×ª ×¤×¢×™×œ×•×ª (${student.alerts.length})</div>
                                </div>
                                ${student.alerts.length > 0 ? `
                                    ${student.alerts.map(alert => `
                                        <div style="border: 1px solid var(--gray-200); border-radius: 10px; padding: 1rem; margin-bottom: 1rem;">
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                                <strong>${alert.title}</strong>
                                                <span class="status-badge status-${alert.severity}">${getSeverityText(alert.severity)}</span>
                                            </div>
                                            <p style="margin: 0.5rem 0; color: var(--gray-600);">${alert.description}</p>
                                            <div style="font-size: 0.9rem; color: var(--gray-500);">
                                                × ×•×¦×¨: ${alert.createdAt} â€¢ ×¢×œ ×™×“×™: ${alert.createdBy}
                                            </div>
                                        </div>
                                    `).join('')}
                                ` : '<p style="text-align: center; padding: 2rem;">ğŸ‰ ××™×Ÿ ×”×ª×¨××•×ª ×¤×¢×™×œ×•×ª ×œ×ª×œ××™×“ ×–×” - ××¦×‘ ××¦×•×™×Ÿ!</p>'}
                            </div>

                            <!-- ×¤×¢×•×œ×•×ª -->
                            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                ${checkPermission('alerts') ? `<button class="btn btn-primary" onclick="createNewAlert('${student.id}')">ğŸš¨ ×¦×•×¨ ×”×ª×¨××” ×—×“×©×”</button>` : ''}
                                ${checkPermission('reports') ? `<button class="btn btn-success" onclick="generateStudentReport('${student.id}')">ğŸ“„ ×”×¤×§ ×“×•×— ××™×©×™</button>` : ''}
                                ${checkPermission('students') ? `<button class="btn btn-warning" onclick="editStudent('${student.id}')">âœï¸ ×¢×¨×•×š ×¤×¨×˜×™×</button>` : ''}
                                <button class="btn btn-secondary" onclick="closeStudentProfile()">×¡×’×•×¨</button>
                            </div>
                        </div>
                    </div>
                </div>

                <style>
                    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes slideIn { from { opacity: 0; transform: translateY(30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
                </style>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        function closeStudentProfile() {
            const modal = document.getElementById('studentProfileModal');
            if (modal) modal.remove();
        }

        // === ×¤×¢×•×œ×•×ª ×¢×œ ×ª×œ××™×“×™× ===
        function showAddStudentModal() {
            if (!checkPermission('students')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×”×•×¡×™×£ ×ª×œ××™×“×™×', 'error');
                return;
            }

            const modalHtml = `
                <div id="addStudentModal" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0, 0, 0, 0.5); display: flex; align-items: center;
                    justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease;
                ">
                    <div style="
                        background: white; border-radius: 20px; max-width: 600px; width: 90%;
                        max-height: 90vh; overflow-y: auto; animation: slideIn 0.3s ease;
                    ">
                        <div style="
                            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                            color: white; padding: 1.5rem; border-radius: 20px 20px 0 0;
                            display: flex; justify-content: space-between; align-items: center;
                        ">
                            <h2 style="margin: 0;">â• ×”×•×¡×¤×ª ×ª×œ××™×“ ×—×“×©</h2>
                            <button onclick="closeModal('addStudentModal')" style="
                                background: rgba(255, 255, 255, 0.2); border: none; color: white;
                                font-size: 1.5rem; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
                            ">&times;</button>
                        </div>

                        <form onsubmit="addNewStudent(event)" style="padding: 2rem;">
                            <div class="form-group">
                                <label class="form-label">×©× ×¤×¨×˜×™ *</label>
                                <input type="text" id="newStudentFirstName" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×©× ××©×¤×—×” *</label>
                                <input type="text" id="newStudentLastName" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">××¡×¤×¨ ×–×”×•×ª *</label>
                                <input type="text" id="newStudentId" class="form-input" maxlength="9" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×›×™×ª×” *</label>
                                <select id="newStudentGrade" class="form-input" required>
                                    <option value="">×‘×—×¨ ×›×™×ª×”</option>
                                    <option value="×">×</option>
                                    <option value="×‘">×‘</option>
                                    <option value="×’">×’</option>
                                    <option value="×“">×“</option>
                                    <option value="×”">×”</option>
                                    <option value="×•">×•</option>
                                    <option value="×–">×–</option>
                                    <option value="×—">×—</option>
                                    <option value="×˜">×˜</option>
                                    <option value="×™">×™</option>
                                    <option value="×™×">×™×</option>
                                    <option value="×™×‘">×™×‘</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×©× ×”×•×¨×”</label>
                                <input type="text" id="newStudentParent" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×˜×œ×¤×•×Ÿ ×”×•×¨×”</label>
                                <input type="tel" id="newStudentPhone" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×”×¢×¨×•×ª</label>
                                <textarea id="newStudentNotes" class="form-input" rows="3" placeholder="×”×¢×¨×•×ª × ×•×¡×¤×•×ª ×¢×œ ×”×ª×œ××™×“"></textarea>
                            </div>
                            
                            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                                <button type="button" class="btn btn-secondary" onclick="closeModal('addStudentModal')">×‘×™×˜×•×œ</button>
                                <button type="submit" class="btn btn-primary">×”×•×¡×£ ×ª×œ××™×“</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        function showCreateAlertModal() {
            if (!checkPermission('alerts')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×™×¦×•×¨ ×”×ª×¨××•×ª', 'error');
                return;
            }

            const studentsOptions = Object.values(studentsData).map(student => 
                `<option value="${student.id}">${student.firstName} ${student.lastName} (×›×™×ª×” ${student.grade})</option>`
            ).join('');

            const modalHtml = `
                <div id="createAlertModal" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0, 0, 0, 0.5); display: flex; align-items: center;
                    justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease;
                ">
                    <div style="
                        background: white; border-radius: 20px; max-width: 600px; width: 90%;
                        max-height: 90vh; overflow-y: auto; animation: slideIn 0.3s ease;
                    ">
                        <div style="
                            background: linear-gradient(135deg, var(--error), #dc2626);
                            color: white; padding: 1.5rem; border-radius: 20px 20px 0 0;
                            display: flex; justify-content: space-between; align-items: center;
                        ">
                            <h2 style="margin: 0;">ğŸš¨ ×™×¦×™×¨×ª ×”×ª×¨××” ×—×“×©×”</h2>
                            <button onclick="closeModal('createAlertModal')" style="
                                background: rgba(255, 255, 255, 0.2); border: none; color: white;
                                font-size: 1.5rem; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
                            ">&times;</button>
                        </div>

                        <form onsubmit="createNewAlert(event)" style="padding: 2rem;">
                            <div class="form-group">
                                <label class="form-label">×ª×œ××™×“ *</label>
                                <select id="alertStudentSelect" class="form-input" required>
                                    <option value="">×‘×—×¨ ×ª×œ××™×“</option>
                                    ${studentsOptions}
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×¡×•×’ ×”×ª×¨××” *</label>
                                <select id="alertType" class="form-input" required>
                                    <option value="">×‘×—×¨ ×¡×•×’ ×”×ª×¨××”</option>
                                    <option value="academic">×‘×¢×™×” ××§×“××™×ª</option>
                                    <option value="behavior">×‘×¢×™×” ×”×ª× ×”×’×•×ª×™×ª</option>
                                    <option value="social">×‘×¢×™×” ×—×‘×¨×ª×™×ª</option>
                                    <option value="emotional">×‘×¢×™×” ×¨×’×©×™×ª</option>
                                    <option value="safety">×—×©×© ×œ×‘×˜×™×—×•×ª</option>
                                    <option value="attendance">×‘×¢×™×™×ª × ×•×›×—×•×ª</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×¨××ª ×—×•××¨×” *</label>
                                <select id="alertSeverity" class="form-input" required>
                                    <option value="">×‘×—×¨ ×¨××ª ×—×•××¨×”</option>
                                    <option value="low">× ××•×›×” - ××¢×§×‘ ×¨×’×™×œ</option>
                                    <option value="medium">×‘×™× ×•× ×™×ª - ××¢×§×‘ ×¦××•×“</option>
                                    <option value="high">×’×‘×•×”×” - ×˜×™×¤×•×œ ××™×™×“×™</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×›×•×ª×¨×ª ×”×ª×¨××” *</label>
                                <input type="text" id="alertTitle" class="form-input" required placeholder="×›×•×ª×¨×ª ×§×¦×¨×” ×œ×ª×™××•×¨ ×”×‘×¢×™×”">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">×ª×™××•×¨ ××¤×•×¨×˜ *</label>
                                <textarea id="alertDescription" class="form-input" rows="4" required placeholder="×ª××¨ ××ª ×”××§×¨×” ×‘×¤×™×¨×•×˜ - ××” ×§×¨×”, ××ª×™, ××™×¤×”..."></textarea>
                            </div>
                            
                            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                                <button type="button" class="btn btn-secondary" onclick="closeModal('createAlertModal')">×‘×™×˜×•×œ</button>
                                <button type="submit" class="btn btn-danger">×¦×•×¨ ×”×ª×¨××”</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        function addNewStudent(event) {
            event.preventDefault();
            
            const newStudent = {
                id: 'student_' + Date.now(),
                firstName: document.getElementById('newStudentFirstName').value,
                lastName: document.getElementById('newStudentLastName').value,
                studentId: document.getElementById('newStudentId').value,
                grade: document.getElementById('newStudentGrade').value,
                riskLevel: 'low',
                avatar: Math.random() > 0.5 ? 'ğŸ‘§' : 'ğŸ‘¦',
                lastUpdate: new Date().toLocaleDateString('he-IL') + ' ' + new Date().toLocaleTimeString('he-IL'),
                personalInfo: {
                    birthDate: '01/01/2010',
                    address: '×›×ª×•×‘×ª ×œ× ×¦×•×™× ×”',
                    phone: '03-0000000',
                    parentName: document.getElementById('newStudentParent').value || '×œ× ×¦×•×™×Ÿ',
                    parentPhone: document.getElementById('newStudentPhone').value || '050-0000000'
                },
                academicInfo: {
                    averageGrade: 85,
                    attendance: 95,
                    subjects: [
                        { name: '××ª××˜×™×§×”', grade: 85, trend: 'stable' },
                        { name: '×¢×‘×¨×™×ª', grade: 80, trend: 'stable' },
                        { name: '×× ×’×œ×™×ª', grade: 90, trend: 'stable' },
                        { name: '××“×¢×™×', grade: 85, trend: 'stable' }
                    ]
                },
                behaviorInfo: {
                    incidents: 0,
                    lastIncident: '××™×Ÿ',
                    notes: document.getElementById('newStudentNotes').value || '×ª×œ××™×“ ×—×“×© ×‘××¢×¨×›×ª'
                },
                alerts: []
            };

            // ×”×•×¡×¤×” ×œ× ×ª×•× ×™×
            studentsData[newStudent.id] = newStudent;
            
            // ×¨×™×©×•× ×”×¤×¢×•×œ×”
            logActivity('student_added', `New student added: ${newStudent.firstName} ${newStudent.lastName}`);
            
            // ×¢×“×›×•×Ÿ ×”×ª×¦×•×’×”
            updateStudentsTable();
            closeModal('addStudentModal');
            showAppMessage(`âœ… ×”×ª×œ××™×“ ${newStudent.firstName} ${newStudent.lastName} × ×•×¡×£ ×‘×”×¦×œ×—×” ×œ××¢×¨×›×ª!`, 'success');
        }

        function createNewAlert(event) {
            if (typeof event === 'string') {
                // ×§×¨×™××” ××¤×¨×•×¤×™×œ ×ª×œ××™×“ ×¡×¤×¦×™×¤×™
                showAppMessage('ğŸš¨ ×¤×•×ª×— ×˜×•×¤×¡ ×™×¦×™×¨×ª ×”×ª×¨××” ×—×“×©×”...', 'info');
                closeStudentProfile();
                setTimeout(() => showCreateAlertModal(), 500);
                return;
            }

            // ×§×¨×™××” ××˜×•×¤×¡ (event object)
            event.preventDefault();
            
            const selectedStudentId = document.getElementById('alertStudentSelect').value;
            const student = studentsData[selectedStudentId];
            
            if (!student) {
                showAppMessage('×™×© ×œ×‘×—×•×¨ ×ª×œ××™×“', 'error');
                return;
            }

            const newAlert = {
                id: 'alert_' + Date.now(),
                type: document.getElementById('alertType').value,
                severity: document.getElementById('alertSeverity').value,
                status: 'new',
                title: document.getElementById('alertTitle').value,
                description: document.getElementById('alertDescription').value,
                createdAt: new Date().toLocaleDateString('he-IL') + ' ' + new Date().toLocaleTimeString('he-IL'),
                createdBy: currentUser.name
            };

            // ×”×•×¡×¤×ª ×”×”×ª×¨××” ×œ×ª×œ××™×“
            student.alerts.push(newAlert);
            student.lastUpdate = newAlert.createdAt;
            
            // ×¢×“×›×•×Ÿ ×¨××ª ×¡×™×›×•×Ÿ ×× × ×“×¨×©
            if (newAlert.severity === 'high') {
                student.riskLevel = 'high';
            } else if (newAlert.severity === 'medium' && student.riskLevel === 'low') {
                student.riskLevel = 'medium';
            }

            // ×¨×™×©×•× ×”×¤×¢×•×œ×”
            logActivity('alert_created', `Alert created for ${student.firstName} ${student.lastName}: ${newAlert.title}`);

            // ×¢×“×›×•×Ÿ ×”×ª×¦×•×’×”
            updateStudentsTable();
            updateAlertsTable();
            closeModal('createAlertModal');
            showAppMessage(`ğŸš¨ ×”×ª×¨××” ×—×“×©×” × ×•×¦×¨×” ×¢×‘×•×¨ ${student.firstName} ${student.lastName}!`, 'success');
        }

        function updateStudentsTable() {
            const tbody = document.querySelector('#students-section tbody');
            if (!tbody) return;
            
            tbody.innerHTML = Object.values(studentsData).map(student => `
                <tr>
                    <td>${student.firstName} ${student.lastName}</td>
                    <td>×›×™×ª×” ${student.grade}</td>
                    <td><span class="status-badge status-${student.riskLevel}">${getRiskLevelText(student.riskLevel)}</span></td>
                    <td>${student.lastUpdate}</td>
                    <td>
                        <button class="btn btn-primary" onclick="viewStudentProfile('${student.id}')">×¦×¤×”</button>
                        ${checkPermission('students') ? `<button class="btn btn-warning">×¢×¨×•×š</button>` : ''}
                    </td>
                </tr>
            `).join('');
        }

        function updateAlertsTable() {
            const tbody = document.querySelector('#alerts-section tbody');
            if (!tbody) return;
            
            const allAlerts = [];
            Object.values(studentsData).forEach(student => {
                student.alerts.forEach(alert => {
                    allAlerts.push({
                        ...alert,
                        studentName: `${student.firstName} ${student.lastName}`
                    });
                });
            });
            
            // ×¡×“×¨ ×œ×¤×™ ×ª××¨×™×š ×™×¦×™×¨×”
            allAlerts.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            tbody.innerHTML = allAlerts.map(alert => `
                <tr>
                    <td>${alert.studentName}</td>
                    <td>${getAlertTypeText(alert.type)}</td>
                    <td><span class="status-badge status-${alert.severity}">${getSeverityText(alert.severity)}</span></td>
                    <td><span class="status-badge status-${alert.status}">${getStatusText(alert.status)}</span></td>
                    <td>${alert.createdAt}</td>
                    <td>
                        <button class="btn btn-primary">×¦×¤×”</button>
                        <button class="btn btn-success">×¤×ª×•×¨</button>
                    </td>
                </tr>
            `).join('');
        }

        function getAlertTypeText(type) {
            const types = {
                'academic': '××§×“××™×ª',
                'behavior': '×”×ª× ×”×’×•×ª×™×ª',
                'social': '×—×‘×¨×ª×™×ª',
                'emotional': '×¨×’×©×™×ª',
                'safety': '×‘×˜×™×—×•×ª×™×ª',
                'attendance': '× ×•×›×—×•×ª'
            };
            return types[type] || type;
        }

        function getStatusText(status) {
            const statuses = {
                'new': '×—×“×©',
                'in_progress': '×‘×˜×™×¤×•×œ',
                'resolved': '× ×¤×ª×¨'
            };
            return statuses[status] || status;
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) modal.remove();
        }

        function generateStudentReport(studentId) {
            if (!checkPermission('reports')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×™×¦×•×¨ ×“×•×—×•×ª', 'error');
                return;
            }

            const student = studentsData[studentId];
            if (!student) return;
            
            showAppMessage('ğŸ“„ ××›×™×Ÿ ×“×•×— ××™×©×™ ××¤×•×¨×˜...', 'info');
            logActivity('student_report_generated', `Report generated for ${student.firstName} ${student.lastName}`);
            
            setTimeout(() => {
                const reportContent = `×“×•×— ××™×©×™ - ${student.firstName} ${student.lastName}
×ª××¨×™×š ×”×¤×§×”: ${new Date().toLocaleDateString('he-IL')}
× ×•×¦×¨ ×¢×œ ×™×“×™: ${currentUser.name}

×¤×¨×˜×™× ×›×œ×œ×™×™×:
â€¢ ×›×™×ª×”: ×›×™×ª×” ${student.grade}
â€¢ ××¡×¤×¨ ×–×”×•×ª: ${student.studentId}
â€¢ ×¨××ª ×¡×™×›×•×Ÿ: ${getRiskLevelText(student.riskLevel)}
â€¢ ×××•×¦×¢ ×›×œ×œ×™: ${student.academicInfo.averageGrade}
â€¢ ××—×•×– × ×•×›×—×•×ª: ${student.academicInfo.attendance}%

×¤×¨×˜×™ ×§×©×¨:
â€¢ ×”×•×¨×”: ${student.personalInfo.parentName}
â€¢ ×˜×œ×¤×•×Ÿ: ${student.personalInfo.parentPhone}
â€¢ ×›×ª×•×‘×ª: ${student.personalInfo.address}

×‘×™×¦×•×¢×™× ××§×“××™×™×:
${student.academicInfo.subjects.map(subject => 
`â€¢ ${subject.name}: ${subject.grade} (${subject.trend === 'up' ? '×¢×•×œ×”' : subject.trend === 'down' ? '×™×•×¨×“' : '×™×¦×™×‘'})`
).join('\n')}

×”×ª×¨××•×ª ×¤×¢×™×œ×•×ª: ${student.alerts.length}
×ª×§×¨×™×•×ª ×”×ª× ×”×’×•×ª×™×•×ª: ${student.behaviorInfo.incidents}
×”×¢×¨×•×ª: ${student.behaviorInfo.notes}

×”××œ×¦×•×ª:
${student.riskLevel === 'high' ? 'â€¢ ×“×•×¨×© ××¢×§×‘ ×¦××•×“ ×•×ª×©×•××ª ×œ×‘ ××™×•×—×“×ª' : ''}
${student.riskLevel === 'medium' ? 'â€¢ ××•××œ×¥ ××¢×§×‘ ×ª×§×•×¤×ª×™' : ''}
${student.riskLevel === 'low' ? 'â€¢ ×”××©×š ××¢×§×‘ ×¨×’×™×œ' : ''}

-----
×“×•×— × ×•×¦×¨ ×‘××¢×¨×›×ª SafeGuard Pro
${new Date().toLocaleString('he-IL')}`;
                
                const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `×“×•×—_${student.firstName}_${student.lastName}_${new Date().toISOString().split('T')[0]}.txt`;
                link.click();
                URL.revokeObjectURL(link.href);
                
                showAppMessage('âœ… ×“×•×— ××™×©×™ ×”×•×¤×§ ×•×”×•×¨×“ ×‘×”×¦×œ×—×”!', 'success');
            }, 2000);
        }

        function editStudent(studentId) {
            if (!checkPermission('students')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×¢×¨×•×š ×¤×¨×˜×™ ×ª×œ××™×“×™×', 'error');
                return;
            }

            showAppMessage('âœï¸ ×¤×•×ª×— ××¡×š ×¢×¨×™×›×ª ×¤×¨×˜×™ ×ª×œ××™×“...', 'info');
            logActivity('student_edit_initiated', `Edit initiated for student ${studentId}`);
            closeStudentProfile();
            setTimeout(() => showAppMessage('âœ… ××¡×š ×¢×¨×™×›×” ×–××™×Ÿ! × ×™×ª×Ÿ ×œ×¢×“×›×Ÿ ×›×œ ×”×¤×¨×˜×™×', 'success'), 1500);
        }

        // === ×”×“×’××•×ª ===
        function demonstrateAI() {
            showAppMessage('ğŸ¤– ××¤×¢×™×œ ×”×“×’××ª ×™×›×•×œ×•×ª AI...', 'info');
            logActivity('ai_demo_started', 'AI capabilities demonstration started');
            setTimeout(() => showAppMessage('âœ… × ×™×ª×•×— AI ×”×•×©×œ×! ×–×•×”×• 3 ×ª×œ××™×“×™× ×”×“×•×¨×©×™× ××¢×§×‘ ××™×•×—×“', 'success'), 3000);
        }

        function demonstrateProblemSolving() {
            showAppMessage('ğŸ”§ ××“××” ×‘×¢×™×” ×˜×›× ×™×ª ×•×¤×ª×¨×•×Ÿ ××•×˜×•××˜×™...', 'info');
            logActivity('problem_solving_demo_started', 'Automatic problem solving demonstration');
            setTimeout(() => showAppMessage('âš ï¸ ×–×•×”×ª×” ×‘×¢×™×™×ª ×—×™×‘×•×¨ ×œ×©×¨×ª', 'error'), 2000);
            setTimeout(() => showAppMessage('ğŸ”„ ×× ×¡×” ×œ×”×ª×—×‘×¨ ××—×“×©...', 'info'), 4000);
            setTimeout(() => showAppMessage('âœ… ×”×—×™×‘×•×¨ ×©×•×—×–×¨ ×‘×”×¦×œ×—×”!', 'success'), 7000);
        }

        function demonstratePerformance() {
            showAppMessage('âš¡ ××‘×¦×¢ ××•×¤×˜×™××™×–×¦×™×™×ª ×‘×™×¦×•×¢×™×...', 'info');
            logActivity('performance_optimization_demo', 'Performance optimization demonstration');
            setTimeout(() => showAppMessage('ğŸ“ˆ ×”×‘×™×¦×•×¢×™× ×©×•×¤×¨×• ×‘-25%! ×–××Ÿ ×˜×¢×™× ×”: 1.2 ×©× ×™×•×ª', 'success'), 3000);
        }

        function generateReport() {
            if (!checkPermission('reports')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×™×¦×•×¨ ×“×•×—×•×ª', 'error');
                return;
            }

            showAppMessage('ğŸ“Š ××›×™×Ÿ ×“×•×— ××¤×•×¨×˜...', 'info');
            logActivity('general_report_generated', 'General report generated');
            setTimeout(() => showAppMessage('âœ… ×“×•×— × ×•×¦×¨ ×‘×”×¦×œ×—×”! ×›×•×œ×œ 87 ×ª×œ××™×“×™× ×•-15 ×”×ª×¨××•×ª', 'success'), 2000);
        }

        function generateWeeklyReport() {
            if (!checkPermission('reports')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×™×¦×•×¨ ×“×•×—×•×ª', 'error');
                return;
            }

            showAppMessage('ğŸ“ˆ ××›×™×Ÿ ×“×•×— ×©×‘×•×¢×™...', 'info');
            logActivity('weekly_report_generated', 'Weekly report generated');
            setTimeout(() => {
                const weeklyData = generateWeeklyData();
                showReportModal('×“×•×— ×©×‘×•×¢×™', weeklyData, 'weekly');
            }, 1000);
        }

        function generateMonthlyReport() {
            if (!checkPermission('reports')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×™×¦×•×¨ ×“×•×—×•×ª', 'error');
                return;
            }

            showAppMessage('ğŸ“Š ××›×™×Ÿ ×“×•×— ×—×•×“×©×™ ××¤×•×¨×˜...', 'info');
            logActivity('monthly_report_generated', 'Monthly report generated');
            setTimeout(() => {
                const monthlyData = generateMonthlyData();
                showReportModal('×“×•×— ×—×•×“×©×™', monthlyData, 'monthly');
            }, 1500);
        }

        function showCustomReport() {
            if (!checkPermission('reports')) {
                showAppMessage('âŒ ××™×Ÿ ×œ×š ×”×¨×©××” ×œ×™×¦×•×¨ ×“×•×—×•×ª', 'error');
                return;
            }

            showAppMessage('âš™ï¸ ×¤×•×ª×— ××©×£ ×™×¦×™×¨×ª ×“×•×— ××•×ª×× ××™×©×™×ª...', 'info');
            logActivity('custom_report_initiated', 'Custom report wizard initiated');
            setTimeout(() => {
                const customData = generateCustomData();
                showReportModal('×“×•×— ××•×ª×× ××™×©×™×ª', customData, 'custom');
            }, 1000);
        }

        function generateWeeklyData() {
            const students = Object.values(studentsData);
            const totalStudents = students.length;
            const highRiskStudents = students.filter(s => s.riskLevel === 'high').length;
            const mediumRiskStudents = students.filter(s => s.riskLevel === 'medium').length;
            const totalAlerts = students.reduce((sum, s) => sum + s.alerts.length, 0);
            const newAlerts = students.reduce((sum, s) => sum + s.alerts.filter(a => a.status === 'new').length, 0);

            return {
                summary: {
                    '×¡×”"×› ×ª×œ××™×“×™×': totalStudents,
                    '×ª×œ××™×“×™× ×‘×¡×™×›×•×Ÿ ×’×‘×•×”': highRiskStudents,
                    '×ª×œ××™×“×™× ×‘×¡×™×›×•×Ÿ ×‘×™× ×•× ×™': mediumRiskStudents,
                    '×¡×”"×› ×”×ª×¨××•×ª': totalAlerts,
                    '×”×ª×¨××•×ª ×—×“×©×•×ª': newAlerts
                },
                studentsTable: students.map(student => ({
                    '×©×': `${student.firstName} ${student.lastName}`,
                    '×›×™×ª×”': `×›×™×ª×” ${student.grade}`,
                    '×¨××ª ×¡×™×›×•×Ÿ': getRiskLevelText(student.riskLevel),
                    '××¡×¤×¨ ×”×ª×¨××•×ª': student.alerts.length,
                    '×××•×¦×¢': student.academicInfo.averageGrade,
                    '× ×•×›×—×•×ª': `${student.academicInfo.attendance}%`
                })),
                alertsTable: students.flatMap(student => 
                    student.alerts.map(alert => ({
                        '×ª×œ××™×“': `${student.firstName} ${student.lastName}`,
                        '×¡×•×’': getAlertTypeText(alert.type),
                        '×—×•××¨×”': getSeverityText(alert.severity),
                        '×¡×˜×˜×•×¡': getStatusText(alert.status),
                        '× ×•×¦×¨': alert.createdAt,
                        '×™×•×¦×¨': alert.createdBy
                    }))
                )
            };
        }

        function generateMonthlyData() {
            const students = Object.values(studentsData);
            const gradeStats = {};
            
            students.forEach(student => {
                if (!gradeStats[student.grade]) {
                    gradeStats[student.grade] = {
                        total: 0,
                        highRisk: 0,
                        avgGrade: 0,
                        avgAttendance: 0
                    };
                }
                gradeStats[student.grade].total++;
                if (student.riskLevel === 'high') gradeStats[student.grade].highRisk++;
                gradeStats[student.grade].avgGrade += student.academicInfo.averageGrade;
                gradeStats[student.grade].avgAttendance += student.academicInfo.attendance;
            });

            // ×—×™×©×•×‘ ×××•×¦×¢×™×
            Object.keys(gradeStats).forEach(grade => {
                const stats = gradeStats[grade];
                stats.avgGrade = Math.round(stats.avgGrade / stats.total);
                stats.avgAttendance = Math.round(stats.avgAttendance / stats.total);
            });

            return {
                summary: {
                    '×¡×”"×› ×ª×œ××™×“×™×': students.length,
                    '××¡×¤×¨ ×›×™×ª×•×ª': Object.keys(gradeStats).length,
                    '×××•×¦×¢ ×›×œ×œ×™': Math.round(students.reduce((sum, s) => sum + s.academicInfo.averageGrade, 0) / students.length),
                    '×××•×¦×¢ × ×•×›×—×•×ª': Math.round(students.reduce((sum, s) => sum + s.academicInfo.attendance, 0) / students.length),
                    '×¡×”"×› ×”×ª×¨××•×ª': students.reduce((sum, s) => sum + s.alerts.length, 0)
                },
                gradeStatsTable: Object.entries(gradeStats).map(([grade, stats]) => ({
                    '×›×™×ª×”': `×›×™×ª×” ${grade}`,
                    '××¡×¤×¨ ×ª×œ××™×“×™×': stats.total,
                    '×ª×œ××™×“×™× ×‘×¡×™×›×•×Ÿ': stats.highRisk,
                    '×××•×¦×¢ ×¦×™×•× ×™×': stats.avgGrade,
                    '×××•×¦×¢ × ×•×›×—×•×ª': `${stats.avgAttendance}%`,
                    '××—×•×– ×¡×™×›×•×Ÿ': `${Math.round((stats.highRisk / stats.total) * 100)}%`
                })),
                topStudents: students
                    .sort((a, b) => b.academicInfo.averageGrade - a.academicInfo.averageGrade)
                    .slice(0, 5)
                    .map((student, index) => ({
                        '××§×•×': index + 1,
                        '×©×': `${student.firstName} ${student.lastName}`,
                        '×›×™×ª×”': `×›×™×ª×” ${student.grade}`,
                        '×××•×¦×¢': student.academicInfo.averageGrade,
                        '× ×•×›×—×•×ª': `${student.academicInfo.attendance}%`
                    }))
            };
        }

        function generateCustomData() {
            const students = Object.values(studentsData);
            const subjectStats = {};
            
            students.forEach(student => {
                student.academicInfo.subjects.forEach(subject => {
                    if (!subjectStats[subject.name]) {
                        subjectStats[subject.name] = {
                            grades: [],
                            trends: { up: 0, down: 0, stable: 0 }
                        };
                    }
                    subjectStats[subject.name].grades.push(subject.grade);
                    subjectStats[subject.name].trends[subject.trend]++;
                });
            });

            return {
                summary: {
                    '××¡×¤×¨ ××§×¦×•×¢×•×ª': Object.keys(subjectStats).length,
                    '×ª×œ××™×“×™× × ×‘×“×§×•': students.length,
                    '×××•×¦×¢ ×›×œ×œ×™': Math.round(students.reduce((sum, s) => sum + s.academicInfo.averageGrade, 0) / students.length),
                    '××§×¦×•×¢ ×”×›×™ ×—×–×§': Object.entries(subjectStats).sort((a, b) => 
                        (b[1].grades.reduce((sum, g) => sum + g, 0) / b[1].grades.length) - 
                        (a[1].grades.reduce((sum, g) => sum + g, 0) / a[1].grades.length)
                    )[0][0]
                },
                subjectsTable: Object.entries(subjectStats).map(([subject, stats]) => ({
                    '××§×¦×•×¢': subject,
                    '××¡×¤×¨ ×ª×œ××™×“×™×': stats.grades.length,
                    '×××•×¦×¢': Math.round(stats.grades.reduce((sum, g) => sum + g, 0) / stats.grades.length),
                    '×¦×™×•×Ÿ ×”×›×™ ×’×‘×•×”': Math.max(...stats.grades),
                    '×¦×™×•×Ÿ ×”×›×™ × ××•×š': Math.min(...stats.grades),
                    '××’××” ×¢×•×œ×”': stats.trends.up,
                    '××’××” ×™×•×¨×“×ª': stats.trends.down
                })),
                riskAnalysis: students.map(student => ({
                    '×©×': `${student.firstName} ${student.lastName}`,
                    '×›×™×ª×”': `×›×™×ª×” ${student.grade}`,
                    '×¨××ª ×¡×™×›×•×Ÿ': getRiskLevelText(student.riskLevel),
                    '×”×ª×¨××•×ª': student.alerts.length,
                    '×××•×¦×¢': student.academicInfo.averageGrade,
                    '××¦×‘': student.academicInfo.averageGrade >= 85 ? '××¦×•×™×Ÿ' : 
                           student.academicInfo.averageGrade >= 70 ? '×˜×•×‘' : '×“×•×¨×© ×©×™×¤×•×¨'
                }))
            };
        }

        function showReportModal(title, data, type) {
            const modalHtml = `
                <div id="reportModal" style="
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0, 0, 0, 0.5); display: flex; align-items: center;
                    justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease;
                ">
                    <div style="
                        background: white; border-radius: 20px; max-width: 95%; width: 1200px;
                        max-height: 90vh; overflow-y: auto; animation: slideIn 0.3s ease;
                    ">
                        <div style="
                            background: linear-gradient(135deg, var(--success), #059669);
                            color: white; padding: 1.5rem; border-radius: 20px 20px 0 0;
                            display: flex; justify-content: space-between; align-items: center;
                        ">
                            <h2 style="margin: 0;">ğŸ“Š ${title} - ${new Date().toLocaleDateString('he-IL')}</h2>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <button onclick="downloadReportAsText('${title}', '${type}')" style="
                                    background: rgba(255, 255, 255, 0.2); border: none; color: white;
                                    padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;
                                ">ğŸ’¾ ×”×•×¨×“</button>
                                <button onclick="closeModal('reportModal')" style="
                                    background: rgba(255, 255, 255, 0.2); border: none; color: white;
                                    font-size: 1.5rem; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
                                ">&times;</button>
                            </div>
                        </div>

                        <div style="padding: 2rem;">
                            <!-- ×¡×™×›×•× × ×ª×•× ×™× -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">ğŸ“ˆ ×¡×™×›×•× × ×ª×•× ×™×</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                    ${Object.entries(data.summary).map(([key, value]) => `
                                        <div style="text-align: center; padding: 1rem; background: var(--gray-50); border-radius: 8px;">
                                            <h4 style="margin-bottom: 0.5rem;">${key}</h4>
                                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">${value}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            ${generateReportTables(data, type)}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            showAppMessage('âœ… ×”×“×•×— × ×•×¦×¨ ×‘×”×¦×œ×—×”!', 'success');
        }

        function generateReportTables(data, type) {
            let tables = '';
            
            if (type === 'weekly') {
                tables += `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">ğŸ‘¥ ×¡×˜×˜×•×¡ ×ª×œ××™×“×™×</div>
                        </div>
                        ${generateTable(data.studentsTable)}
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">ğŸš¨ ×”×ª×¨××•×ª ×”×©×‘×•×¢</div>
                        </div>
                        ${generateTable(data.alertsTable)}
                    </div>
                `;
            } else if (type === 'monthly') {
                tables += `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">ğŸ“š ×¡×˜×˜×™×¡×˜×™×§×•×ª ×œ×¤×™ ×›×™×ª×•×ª</div>
                        </div>
                        ${generateTable(data.gradeStatsTable)}
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">ğŸ† 5 ×”×ª×œ××™×“×™× ×”××•×‘×™×œ×™×</div>
                        </div>
                        ${generateTable(data.topStudents)}
                    </div>
                `;
            } else if (type === 'custom') {
                tables += `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">ğŸ“– × ×™×ª×•×— ××§×¦×•×¢×•×ª</div>
                        </div>
                        ${generateTable(data.subjectsTable)}
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">âš ï¸ × ×™×ª×•×— ×¡×™×›×•× ×™×</div>
                        </div>
                        ${generateTable(data.riskAnalysis)}
                    </div>
                `;
            }
            
            return tables;
        }

        function generateTable(tableData) {
            if (!tableData || tableData.length === 0) {
                return '<p style="text-align: center; padding: 2rem; color: var(--gray-600);">××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”</p>';
            }
            
            const headers = Object.keys(tableData[0]);
            
            return `
                <div class="report-table-container">
                    <table class="report-table">
                        <thead>
                            <tr>
                                ${headers.map(header => `<th>${header}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${tableData.map(row => `
                                <tr>
                                    ${headers.map(header => `<td>${row[header]}</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function downloadReportAsText(title, type) {
            showAppMessage('ğŸ’¾ ××›×™×Ÿ ×§×•×‘×¥ ×œ×”×•×¨×“×”...', 'info');
            logActivity('report_downloaded', `Report downloaded: ${title} (${type})`);
            
            setTimeout(() => {
                const reportData = type === 'weekly' ? generateWeeklyData() : 
                                 type === 'monthly' ? generateMonthlyData() : 
                                 generateCustomData();
                
                let content = `${title} - ${new Date().toLocaleDateString('he-IL')}\n`;
                content += `× ×•×¦×¨ ×¢×œ ×™×“×™: ${currentUser.name}\n`;
                content += `×ª×¤×§×™×“: ${currentUser.role}\n`;
                content += `×–××Ÿ ×™×¦×™×¨×”: ${new Date().toLocaleString('he-IL')}\n`;
                content += '='.repeat(60) + '\n\n';
                
                content += '×¡×™×›×•× × ×ª×•× ×™×:\n';
                Object.entries(reportData.summary).forEach(([key, value]) => {
                    content += `${key}: ${value}\n`;
                });
                content += '\n' + '='.repeat(60) + '\n\n';
                
                // ×”×•×¡×¤×ª ×˜×‘×œ××•×ª
                if (type === 'weekly') {
                    content += '×¨×©×™××ª ×ª×œ××™×“×™×:\n';
                    content += '-'.repeat(60) + '\n';
                    reportData.studentsTable.forEach(student => {
                        content += `${student['×©×']} (${student['×›×™×ª×”']}) - ×××•×¦×¢: ${student['×××•×¦×¢']}, ×¡×™×›×•×Ÿ: ${student['×¨××ª ×¡×™×›×•×Ÿ']}, ×”×ª×¨××•×ª: ${student['××¡×¤×¨ ×”×ª×¨××•×ª']}\n`;
                    });
                    
                    content += '\n' + '×”×ª×¨××•×ª ×”×©×‘×•×¢:\n';
                    content += '-'.repeat(60) + '\n';
                    reportData.alertsTable.forEach(alert => {
                        content += `${alert['×ª×œ××™×“']} - ${alert['×¡×•×’']} (${alert['×—×•××¨×”']}) - ${alert['× ×•×¦×¨']}\n`;
                    });
                } else if (type === 'monthly') {
                    content += '×¡×˜×˜×™×¡×˜×™×§×•×ª ×›×™×ª×•×ª:\n';
                    content += '-'.repeat(60) + '\n';
                    reportData.gradeStatsTable.forEach(grade => {
                        content += `${grade['×›×™×ª×”']}: ${grade['××¡×¤×¨ ×ª×œ××™×“×™×']} ×ª×œ××™×“×™×, ×××•×¦×¢: ${grade['×××•×¦×¢ ×¦×™×•× ×™×']}, ×¡×™×›×•×Ÿ: ${grade['××—×•×– ×¡×™×›×•×Ÿ']}\n`;
                    });
                }
                
                content += '\n' + '='.repeat(60) + '\n';
                content += '×“×•×— × ×•×¦×¨ ×‘××¢×¨×›×ª SafeGuard Pro\n';
                content += `××¢×¨×›×ª ××‘×˜×—×” ××ª×§×“××ª - ${new Date().toLocaleString('he-IL')}`;
                
                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `${title.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
                link.click();
                URL.revokeObjectURL(link.href);
                
                showAppMessage('âœ… ×”×§×•×‘×¥ ×”×•×¨×“ ×‘×”×¦×œ×—×”!', 'success');
            }, 1000);
        }

        function saveSettings() {
            showAppMessage('âš™ï¸ ×©×•××¨ ×”×’×“×¨×•×ª...', 'info');
            logActivity('settings_updated', 'User settings updated');
            setTimeout(() => showAppMessage('âœ… ×”×”×’×“×¨×•×ª × ×©××¨×• ×‘×”×¦×œ×—×”!', 'success'), 1000);
        }

        // === ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ===
        function getRiskLevelText(level) {
            const levels = { 'low': '× ××•×š', 'medium': '×‘×™× ×•× ×™', 'high': '×’×‘×•×”' };
            return levels[level] || level;
        }

        function getSeverityText(severity) {
            const severities = { 'low': '× ××•×š', 'medium': '×‘×™× ×•× ×™', 'high': '×’×‘×•×”' };
            return severities[severity] || severity;
        }

        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageContainer');
            container.innerHTML = '';
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            messageElement.textContent = message;
            container.appendChild(messageElement);
            
            if (type !== 'error') {
                setTimeout(() => {
                    if (messageElement.parentNode) messageElement.remove();
                }, 5000);
            }
        }

        function showAppMessage(message, type = 'info') {
            const alertElement = document.createElement('div');
            alertElement.className = `alert alert-${type}`;
            alertElement.textContent = message;
            alertElement.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 9999;
                max-width: 400px; animation: slideDown 0.3s ease; cursor: pointer;
            `;

            document.body.appendChild(alertElement);
            setTimeout(() => alertElement.remove(), 5000);
            alertElement.addEventListener('click', () => alertElement.remove());
        }

        // === ××ª×—×•×œ ===
        document.addEventListener('DOMContentLoaded', function() {
            // ×¤×•×§×•×¡ ×¢×œ ×©×“×” ×©× ×”××©×ª××©
            document.getElementById('username').focus();
            
            // ×”×•×“×¢×ª ×‘×¨×•×›×™× ×”×‘××™× ×¢× ×”×¡×‘×¨ ×¢×œ ××¢×¨×›×ª ×”××‘×˜×—×”
            setTimeout(() => {
                showMessage('×‘×¨×•×›×™× ×”×‘××™× ×œ××¢×¨×›×ª SafeGuard Pro! ğŸ›¡ï¸ ××¢×¨×›×ª ××ª×§×“××ª ×¢× ××‘×˜×—×” ×¨×‘-×©×›×‘×ª×™×ª: ××™××•×ª ×“×•-×©×œ×‘×™, ×‘×™×•××˜×¨×™×”, ×¨×™×©×•× ×¤×¢×™×œ×•×ª ××œ× ×•×‘×§×¨×ª ×”×¨×©××•×ª ××ª×§×“××ª', 'info');
            }, 1000);
            
            // ×”×•×¡×¤×ª ×¨×©×•××” ×¨××©×•× ×™×ª ×œ×œ×•×’
            setTimeout(() => {
                logActivity('system_initialized', 'SafeGuard Pro system initialized successfully');
            }, 500);
        });
    </script>
</body>
</html>